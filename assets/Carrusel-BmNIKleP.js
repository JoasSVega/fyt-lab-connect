import{r as e,bE as s,j as a,aP as r,aT as t,am as l}from"./vendor-BdXevAs2.js";import{i as o,B as i,x as n,C as c}from"./index-DyBlPJxl.js";import{S as d}from"./SmartImage-DMyj_Sec.js";import"./radix-ByoYm48K.js";import"./carousel-CHkIgb8Q.js";import"./motion-Dk2baUnN.js";const m=e.createContext(null);function u(){const s=e.useContext(m);if(!s)throw new Error("useCarousel must be used within a <Carousel />");return s}const f=e.forwardRef(({orientation:r="horizontal",opts:t,setApi:l,plugins:i,className:n,children:c,...d},u)=>{const[f,p]=s({...t,axis:"horizontal"===r?"x":"y"},i),[h,x]=e.useState(!1),[w,N]=e.useState(!1),v=e.useCallback(e=>{e&&(x(e.canScrollPrev()),N(e.canScrollNext()))},[]),g=e.useCallback(()=>{p?.scrollPrev()},[p]),y=e.useCallback(()=>{p?.scrollNext()},[p]),b=e.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),g()):"ArrowRight"===e.key&&(e.preventDefault(),y())},[g,y]);return e.useEffect(()=>{p&&l&&l(p)},[p,l]),e.useEffect(()=>{if(p)return v(p),p.on("reInit",v),p.on("select",v),()=>{p?.off("select",v)}},[p,v]),a.jsx(m.Provider,{value:{carouselRef:f,api:p,opts:t,orientation:r||("y"===t?.axis?"vertical":"horizontal"),scrollPrev:g,scrollNext:y,canScrollPrev:h,canScrollNext:w},children:a.jsx("div",{ref:u,onKeyDownCapture:b,className:o("relative",n),role:"region","aria-roledescription":"carousel",...d,children:c})})});f.displayName="Carousel";const p=e.forwardRef(({className:e,...s},r)=>{const{carouselRef:t,orientation:l}=u();return a.jsx("div",{ref:t,className:"overflow-hidden py-3 px-2 md:px-4",children:a.jsx("div",{ref:r,className:o("flex","horizontal"===l?"":"flex-col",e),...s})})});p.displayName="CarouselContent";const h=e.forwardRef(({className:e,...s},r)=>{const{orientation:t}=u();return a.jsx("div",{ref:r,role:"group","aria-roledescription":"slide",className:o("min-w-0 shrink-0 grow-0 basis-full","horizontal"===t?"":"pt-4",e),...s})});h.displayName="CarouselItem";const x=e.forwardRef(({className:e,variant:s="outline",size:t="icon",...l},n)=>{const{orientation:c,scrollPrev:d,canScrollPrev:m,opts:f}=u();return a.jsxs(i,{ref:n,variant:s,size:t,className:o("absolute h-8 w-8 rounded-full","horizontal"===c?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!m&&!f?.loop,onClick:d,...l,children:[a.jsx(r,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Previous slide"})]})});x.displayName="CarouselPrevious";const w=e.forwardRef(({className:e,variant:s="outline",size:r="icon",...l},n)=>{const{orientation:c,scrollNext:d,canScrollNext:m,opts:f}=u();return a.jsxs(i,{ref:n,variant:s,size:r,className:o("absolute h-8 w-8 rounded-full","horizontal"===c?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!m&&!f?.loop,onClick:d,...l,children:[a.jsx(t,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Next slide"})]})});w.displayName="CarouselNext";const N=({items:e,color:s="#9B59B6",height:r="",imageAspect:t="4 / 3",showDescription:o=!0,className:i,imageClassName:m})=>{const[u,N]=l.useState(null),[v,g]=l.useState(0),[y,b]=l.useState(!1),j=l.useRef(new Set([0,1,2])),S="undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(max-width: 640px)").matches,C=S?"-small.webp":"-medium.webp",k=e.slice(0,3).map(e=>`${(e.image||"").replace(/-(small|medium|large)\.webp$/i,"")}${C}`),{loaded:z}=n(k,{priority:"high",timeout:8e3});l.useEffect(()=>{if(!u||!z)return;const s=()=>{const s=u.selectedScrollSnap(),a=e.length,r=new Set;for(let e=-2;e<=2;e++){const t=(s+e+a)%a;r.add(t)}r.forEach(s=>{if(!j.current.has(s)){j.current.add(s);const a=e[s];if(a){const e=a.image.replace(/-medium\.webp$/i,""),s=["-small.webp"];!S&&("undefined"!=typeof window&&window.devicePixelRatio>1||"undefined"!=typeof window&&window.innerWidth>=768)&&s.push("-medium.webp"),s.forEach(s=>{(new Image).src=`${e}${s}`})}}})};return s(),u.on("select",s),()=>{u.off("select",s)}},[u,e,z,S]),l.useEffect(()=>{if(!u)return;const e=()=>g(u.selectedScrollSnap());return e(),u.on("select",e),u.on("reInit",e),()=>{u.off("select",e),u.off("reInit",e)}},[u]),l.useEffect(()=>{if(u)try{u.reInit()}catch(e){}},[u,e.length]),l.useEffect(()=>{if(!u)return;if("undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const e=setInterval(()=>{if(!(y||"undefined"!=typeof document&&document.hidden))try{u.canScrollNext()&&u.scrollNext()}catch{}},4e3);return()=>clearInterval(e)},[u,y]);const E=r?"number"==typeof r?`${r}px`:r:"",P=m||"w-full h-full object-cover";return l.useEffect(()=>{if(!u)return;let e=null;const s=()=>{e&&window.clearTimeout(e),e=window.setTimeout(()=>{try{u.reInit()}catch(e){}},150)};return window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s),e&&window.clearTimeout(e)}},[u]),z?a.jsxs("div",{onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),className:i||"w-full max-w-[1800px] mx-auto px-4 md:px-8",children:[a.jsxs(f,{opts:{align:"center",loop:!0,containScroll:"keepSnaps",slidesToScroll:1},setApi:N,className:"w-full",children:[a.jsx(p,{className:"gap-x-4",children:e.map((e,r)=>a.jsx(h,{className:"px-2 md:px-4 basis-[66%] sm:basis-[66%] md:basis-[50%] lg:basis-[33.333%] xl:basis-[25%] 2xl:basis-[20%] min-w-[280px] md:min-w-[320px] max-w-[520px]",children:a.jsxs(c,{style:{borderColor:s},className:"bg-white/90 border-2 shadow-soft md:hover:shadow-medium md:hover:scale-[1.02] transition-all duration-300 overflow-hidden group h-full will-change-transform",children:[a.jsx("div",{className:"relative bg-gray-100",style:E?{height:E}:{aspectRatio:t},children:a.jsx(d,{basePath:e.image,alt:e.title,usage:"card",priority:r<2,fallbackSize:"small",decoding:"async",className:P,style:E?{height:"100%",maxHeight:E,minHeight:E}:{height:"100%"},width:1200,height:900})}),a.jsxs("div",{className:"p-6",children:[a.jsx("h4",{className:"text-[clamp(1rem,1.4vw,1.125rem)] md:text-[clamp(1.05rem,1.2vw,1.25rem)] font-raleway font-semibold mb-3 leading-snug break-normal whitespace-normal",style:{color:s,hyphens:"none",overflowWrap:"normal",wordBreak:"normal"},children:e.title}),o&&e.description&&a.jsx("p",{className:"text-[clamp(0.92rem,1.2vw,1rem)] font-inter text-gray-700 leading-relaxed text-left break-normal whitespace-normal",style:{hyphens:"none",overflowWrap:"normal",wordBreak:"normal"},children:e.description})]})]})},r))}),a.jsx(x,{className:"hidden md:flex -left-10 lg:-left-12"}),a.jsx(w,{className:"hidden md:flex -right-10 lg:-right-12"})]}),a.jsx("div",{className:"flex items-center justify-center mt-4 space-x-2",children:e.map((e,r)=>a.jsx("button",{onClick:()=>u&&u.scrollTo(r),"aria-label":`Go to slide ${r+1}`,"aria-current":v===r,className:"h-2 w-6 md:w-8 rounded-full transition-all "+(v===r?"scale-110":"bg-gray-300"),style:{backgroundColor:v===r?s:void 0}},r))})]}):a.jsx("div",{className:i||"w-full max-w-[1800px] mx-auto px-4 md:px-8",children:a.jsx("div",{className:"w-full flex items-center justify-center",style:{minHeight:E||"18rem"},children:a.jsx("div",{className:"animate-pulse flex space-x-4",children:a.jsxs("div",{className:"flex-1 space-y-4 py-1",children:[a.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-4 bg-gray-300 rounded"}),a.jsx("div",{className:"h-4 bg-gray-300 rounded w-5/6"})]})]})})})})};export{N as default};
