import{j as e,r as t}from"./react-core-CLqPiW5B.js";import{c as n,a as o,u as r,A as i,P as s,b as a,d as l,D as c,C as u,R as p,e as d}from"./radix-ui-BdPMtk10.js";var f=Symbol("radix.slottable");function x(t){const n=({children:t})=>e.jsx(e.Fragment,{children:t});return n.displayName=`${t}.Slottable`,n.__radixId=f,n}var[h]=n("Tooltip",[o]),y=o(),g="TooltipProvider",v=700,b="tooltip.open",[m,w]=h(g),T=n=>{const{__scopeTooltip:o,delayDuration:r=v,skipDelayDuration:i=300,disableHoverableContent:s=!1,children:a}=n,l=t.useRef(!0),c=t.useRef(!1),u=t.useRef(0);return t.useEffect(()=>{const e=u.current;return()=>window.clearTimeout(e)},[]),e.jsx(m,{scope:o,isOpenDelayedRef:l,delayDuration:r,onOpen:t.useCallback(()=>{window.clearTimeout(u.current),l.current=!1},[]),onClose:t.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l.current=!0,i)},[i]),isPointerInTransitRef:c,onPointerInTransitChange:t.useCallback(e=>{c.current=e},[]),disableHoverableContent:s,children:a})};T.displayName=g;var C="Tooltip",[E,R]=h(C),_="TooltipTrigger";t.forwardRef((n,o)=>{const{__scopeTooltip:l,...c}=n,u=R(_,l),p=w(_,l),d=y(l),f=t.useRef(null),x=r(o,f,u.onTriggerChange),h=t.useRef(!1),g=t.useRef(!1),v=t.useCallback(()=>h.current=!1,[]);return t.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),e.jsx(i,{asChild:!0,...d,children:e.jsx(s.button,{"aria-describedby":u.open?u.contentId:void 0,"data-state":u.stateAttribute,...c,ref:x,onPointerMove:a(n.onPointerMove,e=>{"touch"!==e.pointerType&&(g.current||p.isPointerInTransitRef.current||(u.onTriggerEnter(),g.current=!0))}),onPointerLeave:a(n.onPointerLeave,()=>{u.onTriggerLeave(),g.current=!1}),onPointerDown:a(n.onPointerDown,()=>{u.open&&u.onClose(),h.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:a(n.onFocus,()=>{h.current||u.onOpen()}),onBlur:a(n.onBlur,u.onClose),onClick:a(n.onClick,u.onClose)})})}).displayName=_;var[j,P]=h("TooltipPortal",{forceMount:void 0}),L="TooltipContent",k=t.forwardRef((t,n)=>{const o=P(L,t.__scopeTooltip),{forceMount:r=o.forceMount,side:i="top",...s}=t,a=R(L,t.__scopeTooltip);return e.jsx(l,{present:r||a.open,children:a.disableHoverableContent?e.jsx(N,{side:i,...s,ref:n}):e.jsx(D,{side:i,...s,ref:n})})}),D=t.forwardRef((n,o)=>{const i=R(L,n.__scopeTooltip),s=w(L,n.__scopeTooltip),a=t.useRef(null),l=r(o,a),[c,u]=t.useState(null),{trigger:p,onClose:d}=i,f=a.current,{onPointerInTransitChange:x}=s,h=t.useCallback(()=>{u(null),x(!1)},[x]),y=t.useCallback((e,t)=>{const n=e.currentTarget,o={x:e.clientX,y:e.clientY},r=function(e,t,n=5){const o=[];switch(t){case"top":o.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":o.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":o.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":o.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return o}(o,function(e,t){const n=Math.abs(t.top-e.y),o=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,o,r,i)){case i:return"left";case r:return"right";case n:return"top";case o:return"bottom";default:throw new Error("unreachable")}}(o,n.getBoundingClientRect())),i=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const o=e[n];for(;t.length>=2;){const e=t[t.length-1],n=t[t.length-2];if(!((e.x-n.x)*(o.y-n.y)>=(e.y-n.y)*(o.x-n.x)))break;t.pop()}t.push(o)}t.pop();const n=[];for(let t=e.length-1;t>=0;t--){const o=e[t];for(;n.length>=2;){const e=n[n.length-1],t=n[n.length-2];if(!((e.x-t.x)*(o.y-t.y)>=(e.y-t.y)*(o.x-t.x)))break;n.pop()}n.push(o)}return n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}(t)}([...r,...function(e){const{top:t,right:n,bottom:o,left:r}=e;return[{x:r,y:t},{x:n,y:t},{x:n,y:o},{x:r,y:o}]}(t.getBoundingClientRect())]);u(i),x(!0)},[x]);return t.useEffect(()=>()=>h(),[h]),t.useEffect(()=>{if(p&&f){const e=e=>y(e,f),t=e=>y(e,p);return p.addEventListener("pointerleave",e),f.addEventListener("pointerleave",t),()=>{p.removeEventListener("pointerleave",e),f.removeEventListener("pointerleave",t)}}},[p,f,y,h]),t.useEffect(()=>{if(c){const e=e=>{const t=e.target,n={x:e.clientX,y:e.clientY},o=p?.contains(t)||f?.contains(t),r=!function(e,t){const{x:n,y:o}=e;let r=!1;for(let e=0,i=t.length-1;e<t.length;i=e++){const s=t[e],a=t[i],l=s.x,c=s.y,u=a.x,p=a.y;c>o!=p>o&&n<(u-l)*(o-c)/(p-c)+l&&(r=!r)}return r}(n,c);o?h():r&&(h(),d())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[p,f,c,d,h]),e.jsx(N,{...n,ref:l})}),[I,M]=h(C,{isInside:!1}),O=x("TooltipContent"),N=t.forwardRef((n,o)=>{const{__scopeTooltip:r,children:i,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:l,...d}=n,f=R(L,r),x=y(r),{onClose:h}=f;return t.useEffect(()=>(document.addEventListener(b,h),()=>document.removeEventListener(b,h)),[h]),t.useEffect(()=>{if(f.trigger){const e=e=>{const t=e.target;t?.contains(f.trigger)&&h()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[f.trigger,h]),e.jsx(c,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:e=>e.preventDefault(),onDismiss:h,children:e.jsxs(u,{"data-state":f.stateAttribute,...x,...d,ref:o,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(O,{children:i}),e.jsx(I,{scope:r,isInside:!0,children:e.jsx(p,{id:f.contentId,role:"tooltip",children:s||i})})]})})});k.displayName=L;var A="TooltipArrow";t.forwardRef((t,n)=>{const{__scopeTooltip:o,...r}=t,i=y(o);return M(A,o).isInside?null:e.jsx(d,{...i,...r,ref:n})}).displayName=A;var B=T,F=k;export{F as C,B as P};
