const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Latex-PSqsxg41.js","assets/vendor-29DZ0te0.js","assets/radix-CttiZxwU.js","assets/carousel-CQL47Cha.js","assets/katex-C34fSfiO.js","assets/katex-2KSn8t0Q.css"])))=>i.map(i=>d[i]);
var e,t,l=Object.freeze,a=Object.defineProperty,n=(e,t)=>l(a(e,"raw",{value:l(t||e.slice())}));import{_ as i}from"./index-CtRNSMMG.js";import{am as s,j as r,bo as o,a4 as c,bp as d}from"./vendor-29DZ0te0.js";import{A as u,m,M as f}from"./motion-DhUH61oz.js";function p(e,t,l){if(!t||!l)return e;const a=t.find(e=>e.id===l);return(null==a?void 0:a.fields)&&a.fields.length>0?a.fields:e}const x=s.lazy(()=>i(()=>import("./Latex-PSqsxg41.js"),__vite__mapDeps([0,1,2,3,4,5]))),b=e=>{switch(e){case"green":return"bg-emerald-50 text-emerald-700 border-emerald-200";case"yellow":return"bg-amber-50 text-amber-700 border-amber-200";case"red":return"bg-rose-50 text-rose-700 border-rose-200";default:return"bg-slate-50 text-slate-800 border-slate-200"}},v=({id:e,title:t,subtitle:l,icon:a,fields:n,formulas:i,onCalculate:o,categoryColor:c="#0ea5e9",open:d,onOpenChange:u,autoCalculate:m=!1,actionVisibility:f="default",openButtonLabel:x="Abrir Calculadora",backAction:b="volver",enableCalculatePredicate:v})=>{const y="boolean"==typeof d&&!!u,[g,j]=s.useState(!1),N=y?d:g,[w,k]=s.useState(()=>({})),[C,S]=s.useState(()=>{var e;return null==(e=null==i?void 0:i[0])?void 0:e.id}),[E,R]=s.useState(null),[F,I]=s.useState(!1),[T,P]=s.useState(""),[L,V]=s.useState(!1),[A,z]=s.useState(0),O=s.useRef(null),W=s.useRef(!1),_=s.useCallback(e=>e.replace(",","."),[]),B=s.useCallback(e=>{var t,l,a;const s=p(n,i,C);for(const n of s){const i=e[n.name];if((null==(t=n.validation)?void 0:t.required)&&(void 0===i||""===i))return"Complete el campo: ".concat(n.label);if("number"===n.type){const e=Number(i);if(""!==i&&Number.isFinite(e)){if(void 0!==(null==(l=n.validation)?void 0:l.min)&&e<n.validation.min)return"".concat(n.label,": valor mínimo ").concat(n.validation.min);if(void 0!==(null==(a=n.validation)?void 0:a.max)&&e>n.validation.max)return"".concat(n.label,": valor máximo ").concat(n.validation.max)}}}return null},[n,i,C]);s.useEffect(()=>{N&&(k({}),R(null),I(!1),P(""),z(e=>e+1))},[N]);const H=()=>{y?null==u||u(!1):j(!1)},M=(e,t)=>{k(l=>l[e]===t?l:{...l,[e]:t})},q=()=>{k({}),R(null),I(!1),P(""),z(e=>e+1)},Y=()=>{P("");const e={...w},t=p(n,i,C);{const t=B(e);if(t)return void P(t)}const l={...e};for(const n of t)if("number"===n.type){const t=e[n.name];if(void 0===t||""===t)continue;const a="string"==typeof t?_(t):String(t),i=Number(a);l[n.name]=Number.isFinite(i)?i:t}let a=null;const s=C;if(s&&(null==i?void 0:i.length)){const e=i.find(e=>e.id===s);if(!e||!e.compute)return void P("Fórmula no disponible");a=e.compute(l)}else{if(!o)return void P("No hay lógica de cálculo definida");a=o(l,s)}R(a),F||I(!0)},D=()=>{F&&(I(!1),W.current=!0)},U=()=>{W.current&&!F&&(W.current=!1,R(null),setTimeout(()=>{var e,t;return null==(t=null==(e=O.current)?void 0:e.focus)?void 0:t.call(e)},10))},$=s.useMemo(()=>p(n,i,C),[n,i,C]);return s.useEffect(()=>{k(e=>({})),P(""),R(null),I(!1),setTimeout(()=>{var e,t;null==(t=null==(e=O.current)?void 0:e.focus)||t.call(e)},50),z(e=>e+1)},[$]),y?r.jsx(h,{id:e,open:N,onClose:H,title:t,subtitle:l,icon:a,fields:$,values:w,onInput:M,formulas:i,selectedFormula:C,onSelectFormula:S,onCalculate:Y,onClear:q,onReturn:D,result:E,flipped:F,error:T,categoryColor:c,infoOpen:L,setInfoOpen:V,firstInputRef:O,autoCalculate:m,actionVisibility:f,backAction:b,resetTick:A,onFlipAnimationComplete:U,enableCalculatePredicate:v}):r.jsxs("div",{children:[r.jsx("button",{onClick:()=>{y||j(!0)},className:"px-4 py-2 rounded-md text-white font-semibold focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",style:{backgroundColor:c},children:x}),r.jsx(h,{id:e,open:g,onClose:H,title:t,subtitle:l,icon:a,fields:$,values:w,onInput:M,formulas:i,selectedFormula:C,onSelectFormula:S,onCalculate:Y,onClear:q,onReturn:D,result:E,flipped:F,error:T,categoryColor:c,infoOpen:L,setInfoOpen:V,firstInputRef:O,autoCalculate:m,actionVisibility:f,backAction:b,resetTick:A,onFlipAnimationComplete:U,enableCalculatePredicate:v})]})},h=({id:l,open:a,onClose:i,title:p,subtitle:v,icon:h,fields:g,values:j,onInput:N,formulas:w,selectedFormula:k,onSelectFormula:C,onCalculate:S,onClear:E,onReturn:R,result:F,flipped:I,error:T,categoryColor:P,infoOpen:L,setInfoOpen:V,firstInputRef:A,autoCalculate:z=!1,actionVisibility:O="default",backAction:W="volver",resetTick:_,onFlipAnimationComplete:B,enableCalculatePredicate:H})=>{const M=void 0!==import.meta&&!1;s.useCallback(e=>e.replace(",","."),[]);const q=s.useCallback(e=>{var t,l,a;for(const n of g){const i=e[n.name];if((null==(t=n.validation)?void 0:t.required)&&(void 0===i||""===i))return"Complete el campo: ".concat(n.label);if("number"===n.type){const e=Number(i);if(""!==i&&Number.isFinite(e)){if(void 0!==(null==(l=n.validation)?void 0:l.min)&&e<n.validation.min)return"".concat(n.label,": valor mínimo ").concat(n.validation.min);if(void 0!==(null==(a=n.validation)?void 0:a.max)&&e>n.validation.max)return"".concat(n.label,": valor máximo ").concat(n.validation.max)}}}return null},[g]),Y=s.useMemo(()=>null===q(j),[j,q]),D=s.useRef(null),U=s.useRef(null),$=s.useRef(null),G=s.useRef(null),J=s.useRef(0),K=s.useCallback(()=>{const e=U.current;e&&(J.current=e.scrollTop)},[]),Q=s.useRef(null),X=s.useRef(null),Z=s.useRef(null),ee=s.useRef(null),te=s.useRef(!1),le=s.useRef(I);s.useEffect(()=>{le.current!==I&&(te.current=!0),le.current=I},[I]);const[ae,ne]=s.useState(void 0),[ie,se]=s.useState(!1),re=s.useRef(null),oe=s.useRef(!1),[ce,de]=s.useState(0),[ue,me]=s.useState(!1),fe=s.useCallback((e,t)=>{Q.current=e,X.current=t},[]),pe=s.useCallback(()=>{var e,t,l,n;if(!a)return;if(te.current)return;const i=window.innerHeight||0,s=(null==(e=D.current)?void 0:e.getBoundingClientRect().height)||0,r=(null==(t=Z.current)?void 0:t.scrollHeight)||0,o=(null==(l=ee.current)?void 0:l.scrollHeight)||0,c=(null==(n=$.current)?void 0:n.scrollHeight)||0,d=Math.max(.9*i-s-16,0),u=Math.max(r,o);ne(e=>{const t=u||void 0;return void 0===e&&void 0===t||"number"==typeof e&&"number"==typeof t&&Math.abs(e-t)<1?e:t}),se((u||c)>d),U.current&&(U.current.style.maxHeight="".concat(d,"px"))},[a]);s.useLayoutEffect(()=>{pe()},[pe,I,g,k,L]),s.useEffect(()=>{const e=()=>pe();return a&&window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[a,pe]),s.useEffect(()=>{if(!a)return;const e=U.current;return e?(e.style.setProperty("overflow-anchor","none"),()=>{try{e.style.removeProperty("overflow-anchor")}catch(t){}}):void 0},[a]),s.useEffect(()=>{if(!a)return;const e=U.current;if(!e)return;const t=J.current;requestAnimationFrame(()=>{e&&e.scrollTop!==t&&(e.scrollTop=t)})},[a,j]),s.useEffect(()=>{},[a,z,g,l,N]),s.useEffect(()=>{if(!a)return;const e=Q.current;if(!e)return;const t=document.getElementById(e);if(t&&document.activeElement!==t){t.focus({preventScroll:!0});const e=t,l=X.current;null!=l&&"function"==typeof e.setSelectionRange&&requestAnimationFrame(()=>{try{e.setSelectionRange(l,l)}catch(t){}})}},[a,j]),s.useEffect(()=>{const e=e=>{"Escape"===e.key&&i()};return a&&window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a,i]),s.useEffect(()=>{if(a)return re.current=document.body.style.overflow,document.body.style.overflow="hidden",document.body.classList.add("modal-open"),oe.current=!1,()=>{document.body.style.overflow=re.current||"",document.body.classList.remove("modal-open")}},[a]),s.useEffect(()=>{var e,t,l;if(!a||!z)return;const n=e=>j[e.name];for(const a of g){const i=n(a);if((null==(e=a.validation)?void 0:e.required)&&(void 0===i||""===i))return;if("number"===a.type){const e=Number(i);if(!Number.isFinite(e))return;if(void 0!==(null==(t=a.validation)?void 0:t.min)&&e<a.validation.min)return;if(void 0!==(null==(l=a.validation)?void 0:l.max)&&e>a.validation.max)return}}S()},[z,g,j,a,k,ce]);const xe=({children:e})=>"undefined"==typeof document?null:d.createPortal(e,document.body),be="undefined"!=typeof window&&window.innerWidth<=600;return r.jsx(xe,{children:r.jsxs("div",{className:"fixed inset-0 z-[999] p-4 ".concat(a?"pointer-events-auto":"pointer-events-none"),children:[r.jsx("div",{className:"calc-overlay absolute inset-0 transition-[opacity,backdrop-filter] duration-300 ease-in-out ".concat(a?"opacity-100":"opacity-0"),style:{backgroundColor:a?"rgba(0,0,0,0.4)":"rgba(0,0,0,0)",backdropFilter:a?"blur(10px)":"blur(0px)"},onClick:a?i:void 0,"aria-hidden":!a}),r.jsx(u,{children:a&&r.jsxs(m.div,{className:"absolute inset-0 flex items-center justify-center",initial:!oe.current&&{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25,ease:"easeInOut"},children:[r.jsx(m.div,{className:"relative z-[999] w-[94vw] sm:w-[85vw] md:w-[70vw] lg:w-[60vw] xl:w-[50vw] max-h-[90vh]",initial:!oe.current&&{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3,ease:"easeInOut"},onAnimationComplete:()=>{oe.current||(oe.current=!0)},onClick:e=>e.stopPropagation(),ref:G,children:r.jsxs("div",{className:"relative rounded-2xl bg-white shadow-xl ring-1 ring-black/5 flex flex-col max-h-[90vh] overflow-hidden calc-modal-card",children:[r.jsxs("div",{ref:D,className:"calc-header-desktop sticky top-0 z-10 px-5 py-4 border-b flex items-start justify-between bg-white/95 backdrop-blur",style:{background:"linear-gradient(to right, ".concat(P,"15, #ffffffEE)")},"aria-hidden":be||void 0,children:[r.jsxs("div",{className:"min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[h?r.jsx("span",{"aria-hidden":!0,className:"inline-flex items-center justify-center",children:h}):null,r.jsx("h2",{id:"".concat(l,"-title"),className:"flex-1 text-xl sm:text-2xl font-raleway font-bold text-black break-words whitespace-normal leading-snug min-w-0",style:{hyphens:"none"},children:p})]}),v?r.jsx("p",{id:"".concat(l,"-subtitle"),className:"text-sm text-slate-600 break-words whitespace-normal",style:{hyphens:"none"},children:v}):null]}),r.jsxs("div",{className:"flex items-center gap-2",children:[w&&w.length>0?r.jsx("div",{className:"relative",children:r.jsx("select",{"aria-label":"Seleccionar fórmula",className:"text-sm border rounded-md px-2 py-1",value:k,onChange:e=>C(e.target.value),children:w.map(e=>r.jsx("option",{value:e.id,children:e.label},e.id))})}):null,!!(null==w?void 0:w.length)&&r.jsx("button",{type:"button","aria-label":"Ver fórmulas",className:"inline-flex h-10 w-10 items-center justify-center rounded-lg hover:bg-slate-100 touch-manipulation",onClick:()=>V(!0),title:"Ver fórmulas","aria-hidden":be||void 0,children:r.jsx(o,{className:"w-5 h-5 text-slate-600"})}),r.jsx("button",{onClick:i,"aria-label":"Cerrar",className:"inline-flex h-10 w-10 items-center justify-center rounded-lg hover:bg-slate-100 touch-manipulation",children:r.jsx(c,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"calc-header-mobile hidden sticky top-0 z-10 px-4 pt-4 pb-3 border-b bg-white/95 backdrop-blur relative",style:{background:"linear-gradient(to right, ".concat(P,"15, #ffffffEE)")},"aria-hidden":!be||void 0,children:[h?r.jsx("span",{"aria-hidden":!0,className:"inline-flex items-center justify-center w-10 h-10 rounded-lg mb-2",style:{minWidth:"40px"},children:h}):r.jsx("div",{className:"h-8 mb-2"}),r.jsx("button",{onClick:i,"aria-label":"Cerrar",className:"absolute top-2 right-2 inline-flex h-11 w-11 items-center justify-center rounded-lg hover:bg-slate-100 touch-manipulation shadow-sm bg-white/90 backdrop-blur-sm pointer-events-auto",style:{zIndex:20},children:r.jsx(c,{className:"w-6 h-6"})}),w&&w.length>0&&r.jsxs("div",{className:"mb-2 relative",children:[r.jsx("select",{"aria-label":"Seleccionar fórmula (móvil)",className:"block w-full text-sm border rounded-md px-2 py-2 min-h-[44px] pr-14",value:k,onChange:e=>C(e.target.value),children:w.map(e=>r.jsx("option",{value:e.id,children:e.label},e.id))}),r.jsx("button",{type:"button","aria-label":"Ver fórmulas (móvil)",className:"absolute top-1/2 -translate-y-1/2 right-1 inline-flex h-11 w-11 items-center justify-center rounded-md border border-slate-200 bg-white/95 hover:bg-slate-100 touch-manipulation pointer-events-auto",onClick:()=>V(!0),title:"Ver fórmulas",style:{zIndex:20},"aria-hidden":!be||void 0,children:r.jsx(o,{className:"w-6 h-6 text-slate-600"})})]}),r.jsx("h2",{id:"".concat(l,"-title-mobile"),className:"text-lg font-raleway font-bold text-black leading-snug mb-1 break-words whitespace-normal",style:{wordBreak:"break-word",overflowWrap:"break-word",hyphens:"none",minHeight:"24px"},children:p}),v?r.jsx("p",{id:"".concat(l,"-subtitle-mobile"),className:"text-sm text-slate-600 leading-relaxed",style:{hyphens:"none"},children:v}):null]}),r.jsx("style",{children:"\n                @media (max-width:600px){\n                  .calc-header-desktop { display:none; }\n                  .calc-header-mobile { display:block; }\n                }\n                @media (max-width:350px){\n                  .calc-header-mobile h2 { font-size:15px; }\n                  .calc-header-mobile select { font-size:13px; }\n                }\n              "}),r.jsx("div",{ref:U,"data-testid":"calc-modal-body",className:"relative p-5 flex-1 min-h-0 overflow-y-auto overflow-x-hidden calc-modal-body overscroll-contain",children:r.jsx("div",{ref:$,children:r.jsx("div",{className:"relative w-full perspective-1200",style:{perspective:"1200px",WebkitPerspective:"1200px"},children:r.jsx(f,{reducedMotion:"never",children:r.jsxs(m.div,{initial:!1,className:"relative w-full preserve-3d flip-root ".concat(I?"is-flipped":""),style:{height:ae?"".concat(ae,"px"):void 0,transformStyle:"preserve-3d",WebkitTransformStyle:"preserve-3d",willChange:"transform",transformPerspective:1200,transition:"transform 0.6s ease"},animate:{rotateY:I?180:0},transition:{duration:.6,ease:"easeInOut"},onAnimationStart:()=>{te.current=!0},onAnimationComplete:()=>{te.current=!1,I||null==B||B()},children:[r.jsx("div",{ref:Z,className:"absolute inset-0 backface-hidden preserve-3d",style:{pointerEvents:I?"none":"auto",transformStyle:"preserve-3d",WebkitTransformStyle:"preserve-3d",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transform:"rotateY(0deg)"},"aria-hidden":I,children:r.jsxs("form",{noValidate:!0,className:"grid grid-cols-1 md:grid-cols-2 gap-4",onSubmit:e=>{e.preventDefault(),S()},onFocusCapture:e=>{const t=e.target;if(t&&("INPUT"===t.tagName||"SELECT"===t.tagName||"true"===t.getAttribute("contenteditable"))&&(K(),Q.current=t.id||null,"INPUT"===t.tagName)){const e=t;X.current="number"==typeof e.selectionStart?e.selectionStart:null}},children:[g.map((e,t)=>r.jsx(y,{field:e,modalId:l,value:j[e.name],onValueChange:N,isTestEnv:M,autoCalculate:z,setInputTick:de,firstRef:0===t?A:void 0,error:T,recordCaret:fe,captureBodyScrollTop:K},e.name)),T&&r.jsx("div",{className:"md:col-span-2 text-sm text-rose-600",children:T}),"hidden"!==O&&r.jsxs("div",{className:"md:col-span-2 mt-2 flex items-center gap-3",children:["default"===O&&(()=>{if(void 0!==H?H(j):Y)return r.jsx("button",{type:"submit",className:"px-4 py-2 rounded-md text-white font-semibold",style:{backgroundColor:P},children:"Calcular"});const e=q(j)||"Complete los campos requeridos";return r.jsx("button",{type:"button",onClick:()=>S(),className:"px-4 py-2 rounded-md text-white font-semibold opacity-50 cursor-not-allowed",style:{backgroundColor:P},"aria-disabled":!0,title:e,children:"Calcular"})})(),r.jsx("button",{type:"button",onClick:E,className:"px-4 py-2 rounded-md border",children:"Limpiar"})]})]})}),r.jsxs("div",{ref:ee,className:"absolute inset-0 backface-hidden preserve-3d rotate-y-180",style:{pointerEvents:I?"auto":"none",transformStyle:"preserve-3d",WebkitTransformStyle:"preserve-3d",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transform:"rotateY(180deg)"},"aria-hidden":!I,children:[r.jsx("div",{className:"rounded-xl border p-6 text-center ".concat(b(null==F?void 0:F.severity)),children:F?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-sm uppercase tracking-wide opacity-70 mb-1",children:"Resultado"}),r.jsxs("div",{className:"text-3xl font-mono font-bold",children:["number"==typeof F.value?F.value.toString():F.value,F.unit?r.jsx("span",{className:"ml-1 text-base font-sans",children:F.unit}):null]}),F.interpretation?r.jsx("div",{className:"mt-2 text-base font-semibold",children:F.interpretation}):null,F.detailsHtml?r.jsx("div",{className:"mt-3 text-sm leading-relaxed",children:F.detailsHtml}):null]}):r.jsx("div",{className:"text-slate-600",children:"Complete los campos y presione Calcular."})}),r.jsx("div",{className:"mt-4 flex justify-center",children:"volver"===W?r.jsx("button",{type:"button",onClick:R,className:"px-4 py-2 rounded-md border",children:"Volver"}):r.jsx("button",{type:"button",onClick:E,className:"px-4 py-2 rounded-md border",children:"Limpiar"})})]})]})})})})})]})}),L&&r.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/40",style:{backdropFilter:"blur(10px)"},onClick:()=>V(!1)}),r.jsxs("div",{className:"relative z-10 w-[90vw] max-w-[600px] max-h-[85vh] overflow-y-auto rounded-2xl bg-white shadow-lg ring-1 ring-slate-200 p-5",children:[r.jsx("button",{onClick:()=>V(!1),"aria-label":"Cerrar",className:"absolute top-3 right-3 inline-flex h-10 w-10 items-center justify-center rounded-md hover:bg-slate-100 bg-white/90 shadow-sm",style:{zIndex:10},children:r.jsx(c,{className:"w-5 h-5"})}),r.jsx("div",{className:"flex items-start justify-between mb-2 pr-10",children:r.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"Fórmulas"})}),r.jsx("div",{className:"space-y-3",children:w&&w.length>0?w.map((l,a)=>{var i;const o=function(t){if(t.expressionLatex)return t.expressionLatex;if(t.formulaLatex)return t.formulaLatex;const l=t.expressionText||t.description;return l?function(t){const l=t.replace(/\\/g,"\\\\").replace(/([{}_#%&$])/g,"\\$1").replace(/\n/g," ");return String.raw(e||(e=n(["\text{","}"],["\\text{","}"])),l)}(l):null}(l),c=!!l.scoring&&(null==(i=l.scoring.rows)?void 0:i.length);return r.jsxs("div",{"data-testid":"formula-item-".concat(a+1),className:"rounded-xl bg-slate-50 p-3",children:[r.jsxs("div",{className:"text-sm font-semibold text-slate-800",children:[a+1,". ",l.label]}),o?r.jsx("div",{className:"mt-1 overflow-x-auto","data-testid":"formula-latex",children:r.jsx(s.Suspense,{fallback:r.jsx("div",{className:"text-sm text-slate-500",children:"Cargando fórmulas…"}),children:r.jsx(x,{expression:o,display:!0,className:"block text-sky-700 dark:text-sky-300 text-base"})})}):null,c?r.jsxs("div",{className:"mt-2 space-y-2",children:[!o&&r.jsx("div",{"data-testid":"formula-latex",className:"overflow-x-auto",children:r.jsx(s.Suspense,{fallback:r.jsx("div",{className:"text-sm text-slate-500",children:"Cargando fórmulas…"}),children:r.jsx(x,{expression:String.raw(t||(t=n(["\\mathrm{Puntuaci\\'on}=\\sum_{i=1}^{n}\\text{Puntos}(i)"],["\\\\mathrm{Puntuaci\\\\'on}=\\\\sum_{i=1}^{n}\\\\text{Puntos}(i)"]))),display:!0,className:"block text-sky-700 dark:text-sky-300 text-base"})})}),r.jsx("div",{className:"space-y-2",children:l.scoring.rows.map((e,t)=>r.jsxs("div",{className:"rounded-lg bg-white border border-slate-200 p-2",children:[r.jsx("div",{className:"text-xs font-semibold text-slate-700",children:e.label}),r.jsx("ul",{className:"mt-1 space-y-1",children:e.options.map((e,t)=>r.jsxs("li",{className:"text-xs text-slate-600 flex items-start gap-2",children:[r.jsxs("span",{className:"inline-block min-w-12 rounded border border-slate-200 px-1 py-0.5 text-[11px] text-slate-700",children:[e.points," pt"]}),r.jsx("span",{className:"flex-1",children:e.label})]},t))})]},t))})]}):o?null:r.jsx("div",{className:"mt-1 text-xs italic text-slate-500",children:"Fórmula o sistema de puntuación no disponible"})]},l.id)}):r.jsx("div",{className:"text-sm text-slate-600",children:"No hay fórmulas disponibles."})})]})]})]})})]})})},y=s.memo(({field:e,modalId:t,value:l,onValueChange:a,isTestEnv:n,autoCalculate:i,setInputTick:s,firstRef:o,error:c,recordCaret:d,captureBodyScrollTop:u})=>{var m;const f="".concat(t,"-").concat(e.name),p=e.label;return"number"===e.type?r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{htmlFor:f,className:"text-sm font-medium",children:p}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{id:f,name:e.name,type:"text",inputMode:"decimal",lang:"es-ES",className:"w-full rounded-md border px-3 py-2",placeholder:e.placeholder||"p. ej., 0","aria-label":p,onWheel:e=>{e.stopPropagation()},value:"number"==typeof l||"string"==typeof l?l:"",onChange:t=>{u();const l=t.target.value;d(f,"number"==typeof t.target.selectionStart?t.target.selectionStart:null),a(e.name,l),n&&i&&s(e=>e+1)},"aria-invalid":!(!c||void 0!==l&&""!==l||!(null==(m=e.validation)?void 0:m.required))||void 0,ref:o}),e.unit?r.jsx("span",{className:"text-sm text-slate-500",children:e.unit}):null]})]}):"text"===e.type?r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{htmlFor:f,className:"text-sm font-medium",children:p}),r.jsx("input",{id:f,name:e.name,type:"text",className:"w-full rounded-md border px-3 py-2",placeholder:e.placeholder,"aria-label":p,value:"string"==typeof l?l:"",onChange:t=>{u(),n&&s(e=>e+1),d(f,"number"==typeof t.target.selectionStart?t.target.selectionStart:null),a(e.name,t.target.value)},ref:o})]}):"select"===e.type?r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{htmlFor:f,className:"text-sm font-medium",children:p}),r.jsxs("select",{id:f,name:e.name,className:"w-full rounded-md border px-3 py-2","aria-label":p,value:"string"==typeof l?l:"",onChange:t=>{u(),n&&s(e=>e+1),a(e.name,t.target.value)},ref:o,children:[r.jsx("option",{value:"",disabled:!0,children:e.placeholder||"Seleccione..."}),(e.options||[]).map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))]})]}):"toggle"===e.type?r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{className:"text-sm font-medium",children:p}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("input",{id:f,name:e.name,type:"checkbox",checked:!!l,onChange:t=>{u(),a(e.name,t.target.checked)}}),r.jsx("label",{htmlFor:f,className:"text-sm",children:e.placeholder||e.label})]})]}):null});y.displayName="FieldRow";export{v as C};
