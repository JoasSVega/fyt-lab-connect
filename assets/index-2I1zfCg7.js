import{j as e}from"./vendor-CzSKFDTp.js";const a=e=>e/2.54;function t(e){return e<18.5?"Bajo peso":e<25?"Normal":e<30?"Sobrepeso":"Obesidad"}function i(e){return e<25&&e>=18.5?"green":e<30?"yellow":"red"}const l=e=>e/88.4;function n(e){return isFinite(e)?e>=90?"Normal (≥90)":e>=60?"Leve (60–89)":e>=30?"Moderada (30–59)":e>=15?"Severa (15–29)":"Falla renal (<15)":"—"}function r(e){if(isFinite(e))return e>=60?"green":e>=30?"yellow":"red"}const o=[{id:"ampicillin",name:"Ampicilina",vialStrengthMg:1e3,defaultReconstitutionMl:10,cautionMaxStockConcMgPerMl:100,recommendedInfusion:{volumeMl:100,timeMin:30,note:"Infundir en 30 min."}},{id:"cefotaxime",name:"Cefotaxima",vialStrengthMg:1e3,defaultReconstitutionMl:10,cautionMaxStockConcMgPerMl:100,recommendedInfusion:{volumeMl:100,timeMin:30,note:"Infundir en 30 min."}},{id:"ceftriaxone",name:"Ceftriaxona",vialStrengthMg:1e3,defaultReconstitutionMl:10,cautionMaxStockConcMgPerMl:100,recommendedInfusion:{volumeMl:100,timeMin:30,note:"Infundir en 30 min en SSN o DAD."}},{id:"meropenem",name:"Meropenem",vialStrengthMg:500,defaultReconstitutionMl:10,cautionMaxStockConcMgPerMl:50,recommendedInfusion:{volumeMl:100,timeMin:30,note:"Infundir en 30 min."}},{id:"piptazo",name:"Piperacilina/Tazobactam (4.5 g)",vialStrengthMg:4500,defaultReconstitutionMl:20,cautionMaxStockConcMgPerMl:225,recommendedInfusion:{volumeMl:100,timeMin:30,note:"Infundir en 30 min; considerar infusión extendida según protocolo."}},{id:"vancomycin",name:"Vancomicina",vialStrengthMg:500,defaultReconstitutionMl:10,cautionMaxStockConcMgPerMl:50,recommendedInfusion:{volumeMl:250,timeMin:90,note:"Evitar infusión rápida (síndrome del hombre rojo)."}}],m="green",u="yellow";function d(a,t){const i=String(a.unit||("weight"===t?"mg/kg":"mg/m²")),l=Number(a.dosePer),n=a.frequency??"",r=a.drug??"",o=Number("weight"===t?a.weight:a.bsa);if(!l||!o)return{value:NaN,interpretation:"Ingrese parámetros válidos",severity:u};const d=l*o,s=i.startsWith("mg")?"mg":"µg";let c;("mg"===s?d:d/1e3)>1e4&&(c="Atención: dosis total supera 10,000 mg; verifique parámetros y unidades.");const p=`Para un paciente de ${"weight"===t?`${o} kg`:`${o} m²`}, la dosis total de ${r||"el fármaco"} (${l} ${i}) es de ${d.toFixed(2)} ${s}${n?` ${n}`:""}.`,b=e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:["Modo: ","weight"===t?"por peso (kg)":"por SC (m²)"]}),c&&e.jsx("div",{className:"text-amber-700",children:c})]});return{value:Number(d.toFixed(2)),unit:s,interpretation:p,detailsHtml:b,severity:c?u:m}}const s={act:{title:"ACT",subtitle:"Watson / Chumlea",color:"#16a34a",fields:[{name:"weight",label:"Peso",type:"number",unit:"kg",placeholder:"p. ej., 70",validation:{required:!0,min:20,max:300}},{name:"height",label:"Talla",type:"number",unit:"cm",placeholder:"p. ej., 170",validation:{required:!0,min:100,max:250}},{name:"age",label:"Edad",type:"number",unit:"años",placeholder:"p. ej., 40",validation:{required:!0,min:5,max:120}},{name:"sex",label:"Sexo",type:"select",options:[{value:"male",label:"Masculino"},{value:"female",label:"Femenino"}],placeholder:"Seleccionar",validation:{required:!0}}],formulas:[{id:"watson",label:"Watson",expressionLatex:String.raw`\mathrm{ACT}_{\text{masculino}}=2.447-0.09516\,\text{edad}+0.1074\,\text{talla}+0.3362\,\text{peso}\\ \mathrm{ACT}_{\text{femenino}}=-2.097+0.1069\,\text{talla}+0.2466\,\text{peso}`,compute:function(e){const a=Number(e.weight),t=Number(e.height),i=Number(e.age),l=((e,a,t,i)=>"male"===e?2.447-.09156*i+.1074*t+.3362*a:.1069*t-2.097+.2466*a)(e.sex||"male",a,t,i);return{value:Number(l.toFixed(2)),unit:"L"}}},{id:"chumlea",label:"Chumlea",expressionLatex:String.raw`\mathrm{ACT}_{\text{mujer}}=0.34454\,\text{talla}+0.183809\,\text{peso}-35.270121`,compute:function(e){const a=Number(e.weight),t=Number(e.height),i=(l=e.sex||"male",n=a,r=t,"male"===l?.3669*r+.1833*n-35.27:.3561*r+.1833*n-33.947);var l,n,r;return{value:Number(i.toFixed(2)),unit:"L"}}}]},bmi:{title:"IMC",subtitle:"Índice de masa corporal (kg/m²)",color:"#0ea5e9",fields:[{name:"weight",label:"Peso",type:"number",unit:"kg",placeholder:"p. ej., 72",validation:{required:!0,min:20,max:300}},{name:"height",label:"Talla",type:"number",unit:"cm",placeholder:"p. ej., 170",validation:{required:!0,min:100,max:250}}],formulas:[{id:"bmi",label:"IMC",description:"IMC = peso / (talla[m])²",expressionLatex:String.raw`\mathrm{IMC}=\frac{\text{peso}}{(\tfrac{\text{talla}}{100})^{2}}`,compute:function(e){const a=((e,a)=>{const t=a/100;return e/(t*t)})(Number(e.weight),Number(e.height));return{value:Number(a.toFixed(2)),unit:"kg/m²",interpretation:t(a),severity:i(a)}}}]},bmr:{title:"CEB",subtitle:"Consumo energético basal",color:"#f97316",fields:[{name:"weight",label:"Peso",type:"number",unit:"kg",placeholder:"p. ej., 70",validation:{required:!0,min:20,max:300}},{name:"height",label:"Talla",type:"number",unit:"cm",placeholder:"p. ej., 175",validation:{required:!0,min:100,max:250}},{name:"age",label:"Edad",type:"number",unit:"años",placeholder:"p. ej., 40",validation:{required:!0,min:5,max:120}},{name:"sex",label:"Sexo",type:"select",options:[{value:"male",label:"Masculino"},{value:"female",label:"Femenino"}],placeholder:"Seleccionar",validation:{required:!0}}],formulas:[{id:"mifflin",label:"Mifflin–St Jeor",description:"kcal/día",expressionLatex:String.raw`\mathrm{CEB}=10\,\text{peso}+6.25\,\text{talla}-5\,\text{edad}+\beta\quad (\beta=5\;\text{masculino},\;-161\;\text{femenino})`,compute:function(e){const a=Number(e.weight),t=Number(e.height),i=Number(e.age),l=((e,a,t,i)=>{let l=10*a+6.25*t-5*i;return l+="male"===e?5:-161,l})(e.sex||"male",a,t,i);return{value:Math.round(l),unit:"kcal/día"}}},{id:"harris",label:"Harris–Benedict",description:"kcal/día",expressionLatex:String.raw`\mathrm{CEB}=\alpha+13.75\,\text{peso}+5.003\,\text{talla}-6.755\,\text{edad}\; (\alpha=66.5\;\text{masculino})\\ \mathrm{CEB}=\alpha+9.563\,\text{peso}+1.850\,\text{talla}-4.676\,\text{edad}\; (\alpha=655.1\;\text{femenino})`,compute:function(e){const a=Number(e.weight),t=Number(e.height),i=Number(e.age),l=((e,a,t,i)=>"male"===e?66.5+13.75*a+5.003*t-6.755*i:655.1+9.563*a+1.85*t-4.676*i)(e.sex||"male",a,t,i);return{value:Math.round(l),unit:"kcal/día"}}}]},bodyFat:{title:"%GC",subtitle:"Deurenberg (1991)",color:"#a855f7",fields:[{name:"weight",label:"Peso",type:"number",unit:"kg",placeholder:"p. ej., 72",validation:{required:!0,min:20,max:300}},{name:"height",label:"Talla",type:"number",unit:"cm",placeholder:"p. ej., 170",validation:{required:!0,min:100,max:250}},{name:"age",label:"Edad",type:"number",unit:"años",placeholder:"p. ej., 40",validation:{required:!0,min:5,max:120}},{name:"sex",label:"Sexo",type:"select",options:[{value:"male",label:"Masculino"},{value:"female",label:"Femenino"}],placeholder:"Seleccionar",validation:{required:!0}}],formulas:[{id:"deurenberg",label:"Deurenberg",description:"% Grasa corporal",expressionLatex:String.raw`\%\,\mathrm{Grasa}=1.2\times \mathrm{IMC}+0.23\times \text{edad}-10.8\times [\text{masculino}]-5.4\\\text{donde }[\text{masculino}]=1,\;[\text{femenino}]=0`,compute:function(e){const a=Number(e.weight),t=Number(e.height),i=Number(e.age),l=e.sex||"male",n=t/100,r=a/(n*n)*1.2+.23*i-10.8*("male"===l?1:0)-5.4,o="male"===l?r<6?{text:"Muy bajo (riesgo)",severity:"red"}:r<14?{text:"Atleta",severity:"green"}:r<18?{text:"Fitness",severity:"green"}:r<25?{text:"Promedio",severity:"yellow"}:{text:"Obesidad",severity:"red"}:r<14?{text:"Muy bajo (riesgo)",severity:"red"}:r<21?{text:"Atleta",severity:"green"}:r<25?{text:"Fitness",severity:"green"}:r<32?{text:"Promedio",severity:"yellow"}:{text:"Obesidad",severity:"red"};return{value:Number(r.toFixed(1)),unit:"%",interpretation:o.text,severity:o.severity}}}]},bsa:{title:"SC",subtitle:"DuBois & DuBois (m²)",color:"#10b981",fields:[{name:"weight",label:"Peso",type:"number",unit:"kg",placeholder:"p. ej., 70",validation:{required:!0,min:20,max:300}},{name:"height",label:"Talla",type:"number",unit:"cm",placeholder:"p. ej., 170",validation:{required:!0,min:100,max:250}}],formulas:[{id:"dubois",label:"DuBois",description:"BSA = 0.007184 × peso^0.425 × talla^0.725",expressionLatex:String.raw`\mathrm{SC}=0.007184\times \text{peso}^{0.425}\times \text{talla}^{0.725}`,compute:function(e){const a=(t=Number(e.weight),i=Number(e.height),.007184*Math.pow(t,.425)*Math.pow(i,.725));var t,i;return{value:Number(a.toFixed(3)),unit:"m²"}}}]},dose:{title:"Dosis por peso y SC",subtitle:"mg/kg · µg/kg · mg/m² · µg/m²",color:"#0EA5E9",fields:[{name:"weight",label:"Peso",type:"number",unit:"kg",placeholder:"p. ej., 70",validation:{min:1}},{name:"bsa",label:"Superficie corporal",type:"number",unit:"m²",placeholder:"p. ej., 1.8",validation:{min:0}},{name:"dosePer",label:"Dosis recomendada",type:"number",placeholder:"p. ej., 15"},{name:"unit",label:"Unidad",type:"select",options:[{value:"mg/kg",label:"mg/kg"},{value:"µg/kg",label:"µg/kg"},{value:"mg/m²",label:"mg/m²"},{value:"µg/m²",label:"µg/m²"}],placeholder:"Seleccionar"},{name:"frequency",label:"Frecuencia / intervalo (opcional)",type:"text",placeholder:"p. ej., cada 8 h"},{name:"drug",label:"Nombre del fármaco (opcional)",type:"text",placeholder:"p. ej., amikacina"}],formulas:[{id:"perWeight",label:"Por peso (kg)",description:"Dosis total por peso",expressionLatex:String.raw`\text{Dosis}=\text{Peso}\times \text{Dosis}_{\text{por kg}}`,compute:e=>d(e,"weight"),fields:[{name:"weight",label:"Peso",type:"number",unit:"kg",placeholder:"p. ej., 70",validation:{min:1}},{name:"dosePer",label:"Dosis recomendada",type:"number",placeholder:"p. ej., 15"},{name:"unit",label:"Unidad",type:"select",options:[{value:"mg/kg",label:"mg/kg"},{value:"µg/kg",label:"µg/kg"}],placeholder:"Seleccionar"},{name:"frequency",label:"Frecuencia / intervalo (opcional)",type:"text",placeholder:"p. ej., cada 8 h"},{name:"drug",label:"Nombre del fármaco (opcional)",type:"text",placeholder:"p. ej., amikacina"}]},{id:"perBSA",label:"Por SC (m²)",description:"Dosis total por superficie corporal",expressionLatex:String.raw`\text{Dosis}=\text{SC}\times \text{Dosis}_{\text{por m}^2}`,compute:e=>d(e,"bsa"),fields:[{name:"bsa",label:"Superficie corporal",type:"number",unit:"m²",placeholder:"p. ej., 1.8",validation:{min:0}},{name:"dosePer",label:"Dosis recomendada",type:"number",placeholder:"p. ej., 15"},{name:"unit",label:"Unidad",type:"select",options:[{value:"mg/m²",label:"mg/m²"},{value:"µg/m²",label:"µg/m²"}],placeholder:"Seleccionar"},{name:"frequency",label:"Frecuencia / intervalo (opcional)",type:"text",placeholder:"p. ej., cada 8 h"},{name:"drug",label:"Nombre del fármaco (opcional)",type:"text",placeholder:"p. ej., amikacina"}]}]},hepatic:{title:"Función hepática",subtitle:"Child‑Pugh / MELD / APRI / FIB‑4",color:"#F59E0B",fields:[{name:"bili",label:"Bilirrubina total",type:"number",unit:"mg/dL o µmol/L",placeholder:"p. ej., 1.2"},{name:"biliUnit",label:"Unidad de bilirrubina",type:"select",options:[{value:"mgdl",label:"mg/dL"},{value:"umol",label:"µmol/L"}],placeholder:"Seleccionar"},{name:"albumin",label:"Albúmina",type:"number",unit:"g/dL",placeholder:"p. ej., 3.8"},{name:"inr",label:"INR",type:"number",placeholder:"p. ej., 1.2"},{name:"ascites",label:"Ascitis",type:"select",options:[{value:"none",label:"Ausente"},{value:"mild",label:"Leve o controlada"},{value:"moderate",label:"Moderada"},{value:"severe",label:"Severa"}]},{name:"enceph",label:"Encefalopatía",type:"select",options:[{value:"none",label:"Ausente"},{value:"mild",label:"Grado I–II"},{value:"moderate",label:"Grado III"},{value:"severe",label:"Grado IV"}]},{name:"creat",label:"Creatinina",type:"number",unit:"mg/dL",placeholder:"p. ej., 1.0"},{name:"sodium",label:"Sodio sérico (opcional)",type:"number",unit:"mmol/L",placeholder:"p. ej., 135"},{name:"ast",label:"AST",type:"number",unit:"UI/L",placeholder:"p. ej., 35"},{name:"alt",label:"ALT",type:"number",unit:"UI/L",placeholder:"p. ej., 40"},{name:"astULN",label:"LSN AST",type:"number",unit:"UI/L",placeholder:"p. ej., 40"},{name:"platelets",label:"Plaquetas",type:"number",unit:"10^9/L",placeholder:"p. ej., 250"},{name:"age",label:"Edad",type:"number",unit:"años",placeholder:"p. ej., 50"}],formulas:[{id:"child",label:"Child‑Pugh",description:"Puntuación por categorías clínicas y laboratoriales",compute:function(e){const a=Number(e.bili),t=e.biliUnit||"mgdl",i=Number(e.albumin),l=Number(e.inr),n=String(e.ascites||"none"),r=String(e.enceph||"none"),o=((d="umol"===t?a/17.1:a)<2?1:d<=3?2:3)+((u=i)>3.5?1:u>=2.8?2:3)+function(e){return e<1.7?1:e<=2.3?2:3}(l)+("none"===(m=n)?1:"mild"===m?2:3)+function(e){return"none"===e?1:"mild"===e?2:3}(r);var m,u,d;const s=function(e){return e<=6?{cls:"A",severity:"green"}:e<=9?{cls:"B",severity:"yellow"}:{cls:"C",severity:"red"}}(o);return{value:o,interpretation:`Clase ${s.cls}`,severity:s.severity}},fields:[{name:"bili",label:"Bilirrubina total",type:"number",unit:"mg/dL o µmol/L",placeholder:"p. ej., 1.2"},{name:"biliUnit",label:"Unidad de bilirrubina",type:"select",options:[{value:"mgdl",label:"mg/dL"},{value:"umol",label:"µmol/L"}],placeholder:"Seleccionar"},{name:"albumin",label:"Albúmina",type:"number",unit:"g/dL",placeholder:"p. ej., 3.8"},{name:"inr",label:"INR",type:"number",placeholder:"p. ej., 1.2"},{name:"ascites",label:"Ascitis",type:"select",options:[{value:"none",label:"Ausente"},{value:"mild",label:"Leve o controlada"},{value:"moderate",label:"Moderada"},{value:"severe",label:"Severa"}]},{name:"enceph",label:"Encefalopatía",type:"select",options:[{value:"none",label:"Ausente"},{value:"mild",label:"Grado I–II"},{value:"moderate",label:"Grado III"},{value:"severe",label:"Grado IV"}]}],scoring:{title:"Child‑Pugh",rows:[{label:"Bilirrubina (mg/dL)",options:[{label:"< 2",points:1},{label:"2–3",points:2},{label:"> 3",points:3}]},{label:"Albúmina (g/dL)",options:[{label:"> 3.5",points:1},{label:"2.8–3.5",points:2},{label:"< 2.8",points:3}]},{label:"INR",options:[{label:"< 1.7",points:1},{label:"1.7–2.3",points:2},{label:"> 2.3",points:3}]},{label:"Ascitis",options:[{label:"Ausente",points:1},{label:"Leve/Controlada",points:2},{label:"Moderada/Severa",points:3}]},{label:"Encefalopatía",options:[{label:"Ausente",points:1},{label:"Grado I–II",points:2},{label:"Grado III–IV",points:3}]}]}},{id:"meld",label:"MELD / MELD‑Na",description:"Modelo de enfermedad hepática terminal",expressionLatex:String.raw`\mathrm{MELD}=3.78\ln(\text{bili})+11.2\ln(\text{INR})+9.57\ln(\text{creat})+6.43\\ \mathrm{MELD\mbox{-}Na}=\mathrm{MELD}+1.59\,(135-\text{Na})`,compute:function(e){const a=Number(e.bili),t=Number(e.inr),i=Number(e.creat),l=null!=e.sodium&&""!==e.sodium?Number(e.sodium):void 0,n=function(e,a,t){const i=Math.max(e,1),l=Math.max(a,1),n=Math.min(Math.max(t,1),4);return 10*(.957*Math.log(n)+.378*Math.log(i)+1.12*Math.log(l))+6.43}(a,t,i),r=l?function(e,a){const t=Math.min(Math.max(a,125),137);return e+1.32*(137-t)-.033*e*(137-t)}(n,l):n,o=`${r.toFixed(1)} puntos · ${m=r,m<10?"Mortalidad 3 meses ~1–2%":m<20?"Mortalidad 3 meses ~6–20%":m<30?"Mortalidad 3 meses ~19–76%":"Mortalidad 3 meses alta (>76%)"}`;var m;const u=r<10?"green":r<20?"yellow":"red";return{value:Number(r.toFixed(1)),interpretation:o,severity:u}},fields:[{name:"inr",label:"INR",type:"number",placeholder:"p. ej., 1.2"},{name:"bili",label:"Bilirrubina total",type:"number",unit:"mg/dL",placeholder:"p. ej., 1.2"},{name:"creat",label:"Creatinina",type:"number",unit:"mg/dL",placeholder:"p. ej., 1.0"},{name:"sodium",label:"Sodio sérico (opcional)",type:"number",unit:"mmol/L",placeholder:"p. ej., 135"}]},{id:"apri",label:"APRI",description:"Índice AST/plaquetas",expressionLatex:String.raw`\mathrm{APRI}=\frac{\tfrac{\text{AST}}{\text{LSN}}\times 100}{\text{Plaquetas}}`,compute:function(e){const a=Number(e.ast),t=Number(e.astULN),i=Number(e.platelets);if(!a||!t||!i)return{value:NaN,interpretation:"—"};const l=a/t/i*100;return l<.5?{value:Number(l.toFixed(2)),interpretation:"Sin fibrosis significativa",severity:"green"}:l<1?{value:Number(l.toFixed(2)),interpretation:"Indeterminado / leve",severity:"yellow"}:l<2?{value:Number(l.toFixed(2)),interpretation:"Fibrosis significativa",severity:"yellow"}:{value:Number(l.toFixed(2)),interpretation:"Cirrosis probable",severity:"red"}},fields:[{name:"ast",label:"AST",type:"number",unit:"UI/L",placeholder:"p. ej., 35"},{name:"astULN",label:"LSN AST",type:"number",unit:"UI/L",placeholder:"p. ej., 40"},{name:"platelets",label:"Plaquetas",type:"number",unit:"10^9/L",placeholder:"p. ej., 250"}]},{id:"fib4",label:"FIB‑4",description:"Fibrosis (edad, AST, ALT, plaquetas)",expressionLatex:String.raw`\mathrm{FIB4}=\frac{\text{Edad}\times \text{AST}}{\text{Plaquetas}\times \sqrt{\text{ALT}}}`,compute:function(e){const a=Number(e.age),t=Number(e.ast),i=Number(e.alt),l=Number(e.platelets);if(!(a&&t&&i&&l))return{value:NaN,interpretation:"—"};const n=a*t/(l*Math.sqrt(i));return n<1.3?{value:Number(n.toFixed(2)),interpretation:"Bajo riesgo de fibrosis avanzada",severity:"green"}:n<=2.67?{value:Number(n.toFixed(2)),interpretation:"Riesgo intermedio",severity:"yellow"}:{value:Number(n.toFixed(2)),interpretation:"Alto riesgo de fibrosis avanzada",severity:"red"}},fields:[{name:"age",label:"Edad",type:"number",unit:"años",placeholder:"p. ej., 50"},{name:"ast",label:"AST",type:"number",unit:"UI/L",placeholder:"p. ej., 35"},{name:"alt",label:"ALT",type:"number",unit:"UI/L",placeholder:"p. ej., 40"},{name:"platelets",label:"Plaquetas",type:"number",unit:"10^9/L",placeholder:"p. ej., 250"}]}]},idealWeight:{title:"PI",subtitle:"Devine / Robinson / Miller",color:"#0d9488",fields:[{name:"height",label:"Talla",type:"number",unit:"cm",placeholder:"p. ej., 170",validation:{required:!0,min:100,max:250}},{name:"sex",label:"Sexo",type:"select",options:[{value:"male",label:"Masculino"},{value:"female",label:"Femenino"}],placeholder:"Seleccionar",validation:{required:!0}}],formulas:[{id:"devine",label:"Devine (1974)",expressionLatex:String.raw`\mathrm{PI}_{\text{masculino}}=50+2.3\,(\tfrac{\text{talla\,(in)}}{1}-60)\\ \mathrm{PI}_{\text{femenino}}=45.5+2.3\,(\tfrac{\text{talla\,(in)}}{1}-60)`,compute:function(e){const t=Number(e.height),i=((e,t)=>{const i=a(t);return"male"===e?50+2.3*(i-60):45.5+2.3*(i-60)})(e.sex||"male",t);return{value:Number(i.toFixed(2)),unit:"kg"}}},{id:"robinson",label:"Robinson (1983)",expressionLatex:String.raw`\mathrm{PI}_{\text{masculino}}=52+1.9\,(\text{in}-60)\\ \mathrm{PI}_{\text{femenino}}=49+1.7\,(\text{in}-60)`,compute:function(e){const t=Number(e.height),i=((e,t)=>{const i=a(t);return"male"===e?52+1.9*(i-60):49+1.7*(i-60)})(e.sex||"male",t);return{value:Number(i.toFixed(2)),unit:"kg"}}},{id:"miller",label:"Miller (1983)",expressionLatex:String.raw`\mathrm{PI}_{\text{masculino}}=56.2+1.41\,(\text{in}-60)\\ \mathrm{PI}_{\text{femenino}}=53.1+1.36\,(\text{in}-60)`,compute:function(e){const t=Number(e.height),i=((e,t)=>{const i=a(t);return"male"===e?56.2+1.41*(i-60):53.1+1.36*(i-60)})(e.sex||"male",t);return{value:Number(i.toFixed(2)),unit:"kg"}}}]},infusion:{title:"VI",subtitle:"Velocidad de Infusión",color:"#14b8a6",fields:[],formulas:[{id:"volTime",label:"Volumen/tiempo",description:"VI = V / T",compute:function(e){const a=Number(e.volume),t=Number(e.time);if(!Number.isFinite(a)||!Number.isFinite(t)||t<=0)return{value:NaN,interpretation:"Ingrese volumen (mL) y tiempo (h) válidos",severity:u};const i=a/t;return{value:Number(i.toFixed(2)),unit:"mL/h",interpretation:`Velocidad estándar: ${i.toFixed(2)} mL/h para ${a} mL en ${t} h.`,severity:m}},fields:[{name:"volume",label:"Volumen total",type:"number",unit:"mL",placeholder:"p. ej., 500",validation:{min:0,required:!0}},{name:"time",label:"Tiempo total",type:"number",unit:"h",placeholder:"p. ej., 4",validation:{min:0,required:!0}}]},{id:"doseConc",label:"Por dosis",description:"VI = (Dosis/Conc) / T",compute:function(e){const a=Number(e.dose),t=Number(e.conc),i=Number(e.time),l=String(e.doseUnit||"mg"),n=String(e.concUnit||"mg/mL");if(!Number.isFinite(a)||!Number.isFinite(t)||!Number.isFinite(i)||t<=0||i<=0)return{value:NaN,interpretation:"Ingrese dosis, concentración (>0) y tiempo (h)",severity:u};const r=(l.startsWith("µg")?a/1e3:a)/(n.startsWith("µg")?t/1e3:t),o=r/i,d=`Para ${a} ${l} con ${t} ${n} en ${i} h: volumen ${r.toFixed(2)} mL → ${o.toFixed(2)} mL/h.`;return{value:Number(o.toFixed(2)),unit:"mL/h",interpretation:d,severity:m}},fields:[{name:"dose",label:"Dosis total",type:"number",unit:"mg | µg",placeholder:"p. ej., 200",validation:{min:0,required:!0}},{name:"doseUnit",label:"Unidad de dosis",type:"select",options:[{value:"mg",label:"mg"},{value:"µg",label:"µg"}],placeholder:"Seleccionar",validation:{required:!0}},{name:"conc",label:"Concentración",type:"number",unit:"mg/mL | µg/mL",placeholder:"p. ej., 1",validation:{min:0,required:!0}},{name:"concUnit",label:"Unidad de concentración",type:"select",options:[{value:"mg/mL",label:"mg/mL"},{value:"µg/mL",label:"µg/mL"}],placeholder:"Seleccionar",validation:{required:!0}},{name:"time",label:"Tiempo total",type:"number",unit:"h",placeholder:"p. ej., 4",validation:{min:0,required:!0}}]},{id:"drops",label:"Gotas/min",description:"Gotas/min = (V × factor)/(T × 60)",compute:function(e){const a=Number(e.volume),t=Number(e.time),i=Number(e.dropFactor)||20;if(!Number.isFinite(a)||!Number.isFinite(t)||t<=0||!Number.isFinite(i)||i<=0)return{value:NaN,interpretation:"Ingrese volumen, tiempo y factor de goteo válidos",severity:u};const l=a*i/(60*t);return{value:Number(l.toFixed(1)),unit:"gotas/min",interpretation:`Con factor ${i} gotas/mL: ${l.toFixed(1)} gotas/min.`,severity:m}},fields:[{name:"volume",label:"Volumen total",type:"number",unit:"mL",placeholder:"p. ej., 500",validation:{min:0,required:!0}},{name:"time",label:"Tiempo total",type:"number",unit:"h",placeholder:"p. ej., 4",validation:{min:0,required:!0}},{name:"dropFactor",label:"Factor de goteo",type:"number",unit:"gotas/mL",placeholder:"p. ej., 20",validation:{min:1,required:!0}}]}]},loadingMaintenance:{title:"DC/DM",subtitle:"Dosis de Carga y Mantenimiento",color:"#6366F1",fields:[],formulas:[{id:"carga",label:"Dosis de Carga",description:"DC = (Cp × Vd × Peso) / F",compute:function(e){const a=Number(e.weight),t=Number(e.vd),i=Number(e.cp),l=Number(e.F);if(!Number.isFinite(a)||!Number.isFinite(t)||!Number.isFinite(i)||!Number.isFinite(l)||l<=0)return{value:NaN,interpretation:"Ingrese parámetros válidos (peso, Vd, Cp y F)",severity:u};const n=i*(t*a)/l,r=`Con Cp objetivo ${i.toFixed(2)} mg/L, Vd ${t.toFixed(2)} L/kg y peso ${a.toFixed(1)} kg, la dosis de carga estimada es ${n.toFixed(1)} mg (F=${l}).`;return{value:Number(n.toFixed(1)),unit:"mg",interpretation:r,severity:m}},fields:[{name:"weight",label:"Peso",type:"number",unit:"kg",placeholder:"p. ej., 70",validation:{min:1,required:!0}},{name:"vd",label:"Vd",type:"number",unit:"L/kg",placeholder:"p. ej., 0.7",validation:{min:0,required:!0}},{name:"cp",label:"Cp objetivo",type:"number",unit:"mg/L",placeholder:"p. ej., 10",validation:{min:0,required:!0}},{name:"F",label:"Biodisponibilidad (F)",type:"number",placeholder:"0–1",validation:{min:0,max:1,required:!0}}]},{id:"mto",label:"Dosis de Mantenimiento",description:"DM = (Cp × Cl × τ) / F",compute:function(e){const a=Number(e.cp),t=Number(e.F),i=Number(e.tau),l=Number(e.cl);if(!Number.isFinite(a)||!Number.isFinite(t)||t<=0||!Number.isFinite(i)||!Number.isFinite(l))return{value:NaN,interpretation:"Ingrese Cp, Cl (L/h), F (>0) e intervalo (h)",severity:u};const n=a*l*i/t,r=`Con Cp objetivo ${a.toFixed(2)} mg/L, Cl ${l.toFixed(2)} L/h, intervalo ${i.toFixed(1)} h y F=${t}, la dosis de mantenimiento es ${n.toFixed(1)} mg.`;return{value:Number(n.toFixed(1)),unit:"mg",interpretation:r,severity:m}},fields:[{name:"cp",label:"Cp objetivo",type:"number",unit:"mg/L",placeholder:"p. ej., 10",validation:{min:0,required:!0}},{name:"cl",label:"Cl",type:"number",unit:"L/h",placeholder:"p. ej., 4.2",validation:{min:0,required:!0}},{name:"tau",label:"Intervalo",type:"number",unit:"h",placeholder:"p. ej., 12",validation:{min:0,required:!0}},{name:"F",label:"Biodisponibilidad (F)",type:"number",placeholder:"0–1",validation:{min:0,max:1,required:!0}}]}]},mmc:{title:"MMC",subtitle:"James / Hume / % grasa",color:"#0891b2",fields:[{name:"weight",label:"Peso",type:"number",unit:"kg",placeholder:"p. ej., 70",validation:{required:!0,min:20,max:300}},{name:"height",label:"Talla",type:"number",unit:"cm",placeholder:"p. ej., 170",validation:{min:100,max:250}},{name:"bf",label:"% Grasa corporal",type:"number",unit:"%",placeholder:"p. ej., 22",validation:{min:0,max:100}},{name:"sex",label:"Sexo",type:"select",options:[{value:"male",label:"Masculino"},{value:"female",label:"Femenino"}],placeholder:"Seleccionar",validation:{required:!0}}],formulas:[{id:"james",label:"James",expressionLatex:String.raw`\mathrm{MM}_{\text{masculino}}=1.1\,\text{peso}-128\,\Big(\tfrac{\text{peso}}{\text{talla}}\Big)^{2}\\ \mathrm{MM}_{\text{femenino}}=1.07\,\text{peso}-148\,\Big(\tfrac{\text{peso}}{\text{talla}}\Big)^{2}`,compute:function(e){const a=Number(e.weight),t=Number(e.height),i=((e,a,t)=>{const i=a/t;return"male"===e?1.1*a-128*Math.pow(i,2):1.07*a-148*Math.pow(i,2)})(e.sex||"male",a,t);return{value:Number(i.toFixed(2)),unit:"kg"}},fields:[{name:"weight",label:"Peso",type:"number",unit:"kg",placeholder:"p. ej., 70",validation:{required:!0,min:20,max:300}},{name:"height",label:"Talla",type:"number",unit:"cm",placeholder:"p. ej., 170",validation:{required:!0,min:100,max:250}},{name:"sex",label:"Sexo",type:"select",options:[{value:"male",label:"Masculino"},{value:"female",label:"Femenino"}],placeholder:"Seleccionar",validation:{required:!0}}]},{id:"hume",label:"Hume",expressionLatex:String.raw`\mathrm{MM}_{\text{masculino}}=0.32810\,\text{peso}+0.33929\,\text{talla}-29.5336\\ \mathrm{MM}_{\text{femenino}}=0.29569\,\text{peso}+0.41813\,\text{talla}-43.2933`,compute:function(e){const a=Number(e.weight),t=Number(e.height),i=(l=e.sex||"male",n=a,r=t,"male"===l?.3281*n+.33929*r-29.5336:.29569*n+.41813*r-43.2933);var l,n,r;return{value:Number(i.toFixed(2)),unit:"kg"}},fields:[{name:"weight",label:"Peso",type:"number",unit:"kg",placeholder:"p. ej., 70",validation:{required:!0,min:20,max:300}},{name:"height",label:"Talla",type:"number",unit:"cm",placeholder:"p. ej., 170",validation:{required:!0,min:100,max:250}},{name:"sex",label:"Sexo",type:"select",options:[{value:"male",label:"Masculino"},{value:"female",label:"Femenino"}],placeholder:"Seleccionar",validation:{required:!0}}]},{id:"lean",label:"Lean (% grasa)",description:"Masa magra a partir de % grasa",expressionLatex:String.raw`\mathrm{MM}=\text{peso}\times (1-\tfrac{\%\,\text{grasa}}{100})`,compute:function(e){const a=Number(e.weight),t=Number(e.bf);return{value:Number((a*(1-t/100)).toFixed(2)),unit:"kg"}},fields:[{name:"weight",label:"Peso",type:"number",unit:"kg",placeholder:"p. ej., 70",validation:{required:!0,min:20,max:300}},{name:"bf",label:"% Grasa corporal",type:"number",unit:"%",placeholder:"p. ej., 22",validation:{required:!0,min:0,max:100}}]}]},reconstitution:{title:"Reconstitución y dilución de antibióticos",subtitle:"Concentraciones, volúmenes y diluciones",color:"#64748B",fields:[{name:"abId",label:"Antibiótico",type:"select",options:o.map(e=>({value:e.id,label:e.name})),placeholder:"Seleccionar"},{name:"reconstMl",label:"Volumen de reconstitución",type:"number",unit:"mL",placeholder:"p. ej., 10",validation:{min:0}},{name:"dose",label:"Dosis a administrar",type:"number",placeholder:"p. ej., 1000"},{name:"doseUnit",label:"Unidad de dosis",type:"select",options:[{value:"mg",label:"mg"},{value:"g",label:"g"}],placeholder:"Seleccionar"},{name:"desiredConc",label:"Concentración final (opcional)",type:"number",unit:"mg/mL",placeholder:"p. ej., 2.0"},{name:"finalVolume",label:"Volumen final (opcional)",type:"number",unit:"mL",placeholder:"p. ej., 100"},{name:"weight",label:"Peso del paciente (opcional)",type:"number",unit:"kg",placeholder:"p. ej., 70"}],formulas:[{id:"reconst",label:"Calcular",description:"C=\tfrac{m}{V}; Volumen para dosis: V=\tfrac{\text{dosis}}{C}",expressionLatex:String.raw`C=\frac{m}{V}\quad;\quad V=\frac{\text{dosis}}{C}`,compute:a=>function(a){const t=String(a.abId||""),i=o.find(e=>e.id===t)||o[0],l=Number(a.reconstMl)||i?.defaultReconstitutionMl||0,n=Number(a.desiredConc)||0,r=Number(a.dose)||0,d=String(a.doseUnit||"mg"),s=Number(a.finalVolume)||0,c=!!a.addDiluent,p=Number(a.weight)||0,b="g"===d?1e3*r:r,g=l>0?(i?.vialStrengthMg??0)/l:0,h=g>0?b/g:0;let x=0;x=c&&s>0?s:n>0?b/n:i?.recommendedInfusion?.volumeMl??Math.max(50,h);const v=Math.max(0,x-h),f=x>0?b/x:0,y=[];g&&i&&g>i.cautionMaxStockConcMgPerMl&&y.push(`Advertencia: concentración tras reconstitución (${g.toFixed(1)} mg/mL) supera el límite recomendado (${i.cautionMaxStockConcMgPerMl} mg/mL).`),x>0&&x<10&&y.push("Precaución: volumen final de administración muy bajo para infusión IV."),f>(i?.cautionMaxStockConcMgPerMl??100)&&y.push("Precaución: concentración final elevada; verifique compatibilidad y vía de administración.");const N=p>0?` (~${(b/p).toFixed(1)} mg/kg)`:"",M=i?.recommendedInfusion?`Sugerencia: administrar en ~${i.recommendedInfusion.volumeMl} mL en ${i.recommendedInfusion.timeMin} min. ${i.recommendedInfusion.note??""}`:"Sugerencia: diluir en volumen adecuado y administrar según protocolo local.",L=`Con una reconstitución a ${l} mL, la concentración del vial es ${g.toFixed(1)} mg/mL. Para una dosis de ${b.toFixed(0)} mg${N}, extraiga ${h.toFixed(1)} mL y diluya hasta ${x.toFixed(0)} mL (añadir ${v.toFixed(0)} mL). Concentración final: ${f.toFixed(1)} mg/mL.`,S=e.jsxs("div",{className:"text-sm space-y-2",children:[e.jsxs("div",{className:"font-medium",children:["Antibiótico: ",i?.name]}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[e.jsxs("li",{children:["Concentración tras reconstitución: ",g>0?`${g.toFixed(1)} mg/mL`:"—"]}),e.jsxs("li",{children:["Volumen a extraer para la dosis: ",h>0?`${h.toFixed(1)} mL`:"—"]}),e.jsxs("li",{children:["Volumen final de administración: ",x>0?`${x.toFixed(0)} mL`:"—"]}),e.jsx("li",{children:M})]}),y.length>0&&e.jsx("div",{className:"mt-2 space-y-1 text-amber-700",children:y.map((a,t)=>e.jsx("div",{children:a},t))})]}),j=y.length>0?u:m;return{value:Number(b.toFixed(0)),unit:"mg",interpretation:L,detailsHtml:S,severity:j}}(a),fields:[{name:"abId",label:"Antibiótico",type:"select",options:o.map(e=>({value:e.id,label:e.name})),placeholder:"Seleccionar"},{name:"reconstMl",label:"Volumen de reconstitución",type:"number",unit:"mL",placeholder:"p. ej., 10",validation:{min:0}},{name:"dose",label:"Dosis a administrar",type:"number",placeholder:"p. ej., 1000"},{name:"doseUnit",label:"Unidad de dosis",type:"select",options:[{value:"mg",label:"mg"},{value:"g",label:"g"}],placeholder:"Seleccionar"},{name:"desiredConc",label:"Concentración final (opcional)",type:"number",unit:"mg/mL",placeholder:"p. ej., 2.0"},{name:"finalVolume",label:"Volumen final (opcional)",type:"number",unit:"mL",placeholder:"p. ej., 100"},{name:"addDiluent",label:"Agregar diluyente adicional",type:"toggle",placeholder:"Agregar diluyente adicional"},{name:"weight",label:"Peso del paciente (opcional)",type:"number",unit:"kg",placeholder:"p. ej., 70"}]}]},renal:{title:"Función renal",subtitle:"Cockcroft–Gault / MDRD / CKD‑EPI",color:"#3B82F6",fields:[{name:"age",label:"Edad",type:"number",placeholder:"p. ej., 65",validation:{required:!0,min:18,max:120}},{name:"sex",label:"Sexo",type:"select",options:[{value:"male",label:"Masculino"},{value:"female",label:"Femenino"}],placeholder:"Seleccionar",validation:{required:!0}},{name:"weight",label:"Peso",type:"number",unit:"kg",placeholder:"p. ej., 70",validation:{required:!0,min:20,max:300}},{name:"scr",label:"Creatinina sérica",type:"number",unit:"mg/dL | µmol/L",placeholder:"p. ej., 1.0",validation:{required:!0,min:.1}},{name:"unit",label:"Unidad de creatinina",type:"select",options:[{value:"mgdl",label:"mg/dL"},{value:"umol",label:"µmol/L"}],placeholder:"Seleccionar",validation:{required:!0}}],formulas:[{id:"cg",label:"Cockcroft–Gault",description:"CrCl en mL/min",expressionLatex:String.raw`\mathrm{CrCl}=\frac{(140-\text{edad})\times \text{peso}\times (0.85\;\text{si femenino})}{72\times SCr_{mg/dL}}`,compute:function(e){const a=(t=Number(e.age),i=Number(e.weight),o=Number(e.scr),m=e.sex||"male",u=e.unit||"mgdl",(140-t)*i*("female"===m?.85:1)/(72*("umol"===u?l(o):o)));var t,i,o,m,u;return{value:Number(a.toFixed(2)),unit:"ml/min",interpretation:n(a),severity:r(a)}},fields:[{name:"age",label:"Edad",type:"number",placeholder:"p. ej., 65",validation:{required:!0,min:18,max:120}},{name:"sex",label:"Sexo",type:"select",options:[{value:"male",label:"Masculino"},{value:"female",label:"Femenino"}],placeholder:"Seleccionar",validation:{required:!0}},{name:"weight",label:"Peso",type:"number",unit:"kg",placeholder:"p. ej., 70",validation:{required:!0,min:20,max:300}},{name:"scr",label:"Creatinina sérica",type:"number",unit:"mg/dL | µmol/L",placeholder:"p. ej., 1.0",validation:{required:!0,min:.1}},{name:"unit",label:"Unidad de creatinina",type:"select",options:[{value:"mgdl",label:"mg/dL"},{value:"umol",label:"µmol/L"}],placeholder:"Seleccionar",validation:{required:!0}}]},{id:"mdrd",label:"MDRD (4v)",description:"TFG en mL/min/1.73m²",expressionLatex:String.raw`\mathrm{TFG}=175\times (SCr)^{-1.154}\times (\text{edad})^{-0.203}\times (0.742^{[\text{femenino}]})\times (1.212^{[\text{afro}]})`,compute:function(e){const a=Number(e.age),t=Number(e.scr),i=e.sex||"male",o=e.unit||"mgdl",m=function(e,a,t,i,n){const r="umol"===n?l(a):a;let o=175*Math.pow(r,-1.154)*Math.pow(e,-.203);return"female"===t&&(o*=.742),i&&(o*=1.212),o}(a,t,i,!!e.black,o);return{value:Number(m.toFixed(2)),unit:"ml/min/1.73m²",interpretation:n(m),severity:r(m)}},fields:[{name:"age",label:"Edad",type:"number",placeholder:"p. ej., 65",validation:{required:!0,min:18,max:120}},{name:"sex",label:"Sexo",type:"select",options:[{value:"male",label:"Masculino"},{value:"female",label:"Femenino"}],placeholder:"Seleccionar",validation:{required:!0}},{name:"scr",label:"Creatinina sérica",type:"number",unit:"mg/dL | µmol/L",placeholder:"p. ej., 1.0",validation:{required:!0,min:.1}},{name:"unit",label:"Unidad de creatinina",type:"select",options:[{value:"mgdl",label:"mg/dL"},{value:"umol",label:"µmol/L"}],placeholder:"Seleccionar",validation:{required:!0}},{name:"black",label:"¿Afrodescendiente?",type:"toggle",placeholder:"¿Afrodescendiente?"},{name:"weight",label:"Peso",type:"number",unit:"kg",placeholder:"p. ej., 70",validation:{required:!0,min:20,max:300}}]},{id:"ckd2009",label:"CKD‑EPI 2009",expressionLatex:String.raw`\mathrm{TFG}=141\times \min\left(\tfrac{SCr}{\kappa},1\right)^{\alpha}\times \max\left(\tfrac{SCr}{\kappa},1\right)^{-1.209}\times 0.993^{\text{edad}}\times 1.018^{[\text{femenino}]}\times 1.159^{[\text{afro}]}`,compute:function(e){const a=Number(e.age),t=Number(e.scr),i=e.sex||"male",o=e.unit||"mgdl",m=function(e,a,t,i,n){const r="umol"===n?l(a):a,o="female"===t?.7:.9,m="female"===t?-.329:-.411,u=Math.min(r/o,1),d=Math.max(r/o,1);let s=141*Math.pow(u,m)*Math.pow(d,-1.209)*Math.pow(.993,e);return"female"===t&&(s*=1.018),i&&(s*=1.159),s}(a,t,i,!!e.black,o);return{value:Number(m.toFixed(2)),unit:"ml/min/1.73m²",interpretation:n(m),severity:r(m)}},fields:[{name:"age",label:"Edad",type:"number",placeholder:"p. ej., 65",validation:{required:!0,min:18,max:120}},{name:"sex",label:"Sexo",type:"select",options:[{value:"male",label:"Masculino"},{value:"female",label:"Femenino"}],placeholder:"Seleccionar",validation:{required:!0}},{name:"scr",label:"Creatinina sérica",type:"number",unit:"mg/dL | µmol/L",placeholder:"p. ej., 1.0",validation:{required:!0,min:.1}},{name:"unit",label:"Unidad de creatinina",type:"select",options:[{value:"mgdl",label:"mg/dL"},{value:"umol",label:"µmol/L"}],placeholder:"Seleccionar",validation:{required:!0}},{name:"black",label:"¿Afrodescendiente?",type:"toggle",placeholder:"¿Afrodescendiente?"},{name:"weight",label:"Peso",type:"number",unit:"kg",placeholder:"p. ej., 70",validation:{required:!0,min:20,max:300}}]},{id:"ckd2021",label:"CKD‑EPI 2021",expressionLatex:String.raw`\mathrm{TFG}=142\times \min\left(\tfrac{SCr}{\kappa},1\right)^{\alpha}\times \max\left(\tfrac{SCr}{\kappa},1\right)^{-1.200}\times 0.9938^{\text{edad}}\times 1.012^{[\text{femenino}]}`,compute:function(e){const a=function(e,a,t,i){const n="umol"===i?l(a):a,r="female"===t?.7:.9,o="female"===t?-.241:-.302,m=Math.min(n/r,1),u=Math.max(n/r,1);let d=142*Math.pow(m,o)*Math.pow(u,-1.2)*Math.pow(.9938,e);return"female"===t&&(d*=1.012),d}(Number(e.age),Number(e.scr),e.sex||"male",e.unit||"mgdl");return{value:Number(a.toFixed(2)),unit:"ml/min/1.73m²",interpretation:n(a),severity:r(a)}},fields:[{name:"age",label:"Edad",type:"number",placeholder:"p. ej., 65",validation:{required:!0,min:18,max:120}},{name:"sex",label:"Sexo",type:"select",options:[{value:"male",label:"Masculino"},{value:"female",label:"Femenino"}],placeholder:"Seleccionar",validation:{required:!0}},{name:"scr",label:"Creatinina sérica",type:"number",unit:"mg/dL | µmol/L",placeholder:"p. ej., 1.0",validation:{required:!0,min:.1}},{name:"unit",label:"Unidad de creatinina",type:"select",options:[{value:"mgdl",label:"mg/dL"},{value:"umol",label:"µmol/L"}],placeholder:"Seleccionar",validation:{required:!0}},{name:"weight",label:"Peso",type:"number",unit:"kg",placeholder:"p. ej., 70",validation:{required:!0,min:20,max:300}}]}]}};export{s as C};
