!function(){let e,t,l=e=>e;function n(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),l.push.apply(l,n)}return l}function a(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?n(Object(l),!0).forEach(function(t){r(e,t,l[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):n(Object(l)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))})}return e}function r(e,t,l){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var l=t.call(e,"string");if("object"!=typeof l)return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}System.register(["./index-legacy-BLrhpqKE.js","./vendor-legacy-DgXOJGI_.js","./motion-legacy-CfWCCy21.js"],function(n,r){"use strict";var i,s,o,c,d,u,m,f,p;return{setters:[e=>{i=e._},e=>{s=e.am,o=e.j,c=e.bo,d=e.a4,u=e.bp},e=>{m=e.A,f=e.m,p=e.M}],execute:function(){function x(e,t,l){if(!t||!l)return e;const n=t.find(e=>e.id===l);return null!=n&&n.fields&&n.fields.length>0?n.fields:e}const v=s.lazy(()=>i(()=>r.import("./Latex-legacy-C_fVoLiQ.js"),void 0)),b=e=>{switch(e){case"green":return"bg-emerald-50 text-emerald-700 border-emerald-200";case"yellow":return"bg-amber-50 text-amber-700 border-amber-200";case"red":return"bg-rose-50 text-rose-700 border-rose-200";default:return"bg-slate-50 text-slate-800 border-slate-200"}},h=(n("C",({id:e,title:t,subtitle:l,icon:n,fields:r,formulas:i,onCalculate:c,categoryColor:d="#0ea5e9",open:u,onOpenChange:m,autoCalculate:f=!1,actionVisibility:p="default",openButtonLabel:v="Abrir Calculadora",backAction:b="volver",enableCalculatePredicate:y})=>{const g="boolean"==typeof u&&!!m,[j,w]=s.useState(!1),N=g?u:j,[k,C]=s.useState(()=>({})),[S,E]=s.useState(()=>{var e;return null==i||null===(e=i[0])||void 0===e?void 0:e.id}),[O,R]=s.useState(null),[F,P]=s.useState(!1),[$,I]=s.useState(""),[T,L]=s.useState(!1),[V,A]=s.useState(0),z=s.useRef(null),W=s.useRef(!1),B=s.useCallback(e=>e.replace(",","."),[]),H=s.useCallback(e=>{const t=x(r,i,S);for(const r of t){var l;const t=e[r.name];if(null!==(l=r.validation)&&void 0!==l&&l.required&&(void 0===t||""===t))return`Complete el campo: ${r.label}`;if("number"===r.type){const e=Number(t);if(""!==t&&Number.isFinite(e)){var n,a;if(void 0!==(null===(n=r.validation)||void 0===n?void 0:n.min)&&e<r.validation.min)return`${r.label}: valor mínimo ${r.validation.min}`;if(void 0!==(null===(a=r.validation)||void 0===a?void 0:a.max)&&e>r.validation.max)return`${r.label}: valor máximo ${r.validation.max}`}}}return null},[r,i,S]);s.useEffect(()=>{N&&(C({}),R(null),P(!1),I(""),A(e=>e+1))},[N]);const M=()=>{g?null==m||m(!1):w(!1)},q=(e,t)=>{C(l=>l[e]===t?l:a(a({},l),{},{[e]:t}))},D=()=>{C({}),R(null),P(!1),I(""),A(e=>e+1)},Y=()=>{I("");const e=a({},k),t=x(r,i,S);{const t=H(e);if(t)return void I(t)}const l=a({},e);for(const a of t)if("number"===a.type){const t=e[a.name];if(void 0===t||""===t)continue;const n="string"==typeof t?B(t):String(t),r=Number(n);l[a.name]=Number.isFinite(r)?r:t}let n=null;const s=S;if(s&&null!=i&&i.length){const e=i.find(e=>e.id===s);if(!e||!e.compute)return void I("Fórmula no disponible");n=e.compute(l)}else{if(!c)return void I("No hay lógica de cálculo definida");n=c(l,s)}R(n),F||P(!0)},_=()=>{F&&(P(!1),W.current=!0)},U=()=>{W.current&&!F&&(W.current=!1,R(null),setTimeout(()=>{var e,t;return null===(e=z.current)||void 0===e||null===(t=e.focus)||void 0===t?void 0:t.call(e)},10))},G=s.useMemo(()=>x(r,i,S),[r,i,S]);return s.useEffect(()=>{C(e=>({})),I(""),R(null),P(!1),setTimeout(()=>{var e,t;null===(e=z.current)||void 0===e||null===(t=e.focus)||void 0===t||t.call(e)},50),A(e=>e+1)},[G]),g?o.jsx(h,{id:e,open:N,onClose:M,title:t,subtitle:l,icon:n,fields:G,values:k,onInput:q,formulas:i,selectedFormula:S,onSelectFormula:E,onCalculate:Y,onClear:D,onReturn:_,result:O,flipped:F,error:$,categoryColor:d,infoOpen:T,setInfoOpen:L,firstInputRef:z,autoCalculate:f,actionVisibility:p,backAction:b,resetTick:V,onFlipAnimationComplete:U,enableCalculatePredicate:y}):o.jsxs("div",{children:[o.jsx("button",{onClick:()=>{g||w(!0)},className:"px-4 py-2 rounded-md text-white font-semibold focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",style:{backgroundColor:d},children:v}),o.jsx(h,{id:e,open:j,onClose:M,title:t,subtitle:l,icon:n,fields:G,values:k,onInput:q,formulas:i,selectedFormula:S,onSelectFormula:E,onCalculate:Y,onClear:D,onReturn:_,result:O,flipped:F,error:$,categoryColor:d,infoOpen:T,setInfoOpen:L,firstInputRef:z,autoCalculate:f,actionVisibility:p,backAction:b,resetTick:V,onFlipAnimationComplete:U,enableCalculatePredicate:y})]})}),({id:n,open:a,onClose:i,title:x,subtitle:h,icon:g,fields:j,values:w,onInput:N,formulas:k,selectedFormula:C,onSelectFormula:S,onCalculate:E,onClear:O,onReturn:R,result:F,flipped:P,error:$,categoryColor:I,infoOpen:T,setInfoOpen:L,firstInputRef:V,autoCalculate:A=!1,actionVisibility:z="default",backAction:W="volver",resetTick:B,onFlipAnimationComplete:H,enableCalculatePredicate:M})=>{const q=void 0!==r.meta&&!1;s.useCallback(e=>e.replace(",","."),[]);const D=s.useCallback(e=>{for(const a of j){var t;const r=e[a.name];if(null!==(t=a.validation)&&void 0!==t&&t.required&&(void 0===r||""===r))return`Complete el campo: ${a.label}`;if("number"===a.type){const e=Number(r);if(""!==r&&Number.isFinite(e)){var l,n;if(void 0!==(null===(l=a.validation)||void 0===l?void 0:l.min)&&e<a.validation.min)return`${a.label}: valor mínimo ${a.validation.min}`;if(void 0!==(null===(n=a.validation)||void 0===n?void 0:n.max)&&e>a.validation.max)return`${a.label}: valor máximo ${a.validation.max}`}}}return null},[j]),Y=s.useMemo(()=>null===D(w),[w,D]),_=s.useRef(null),U=s.useRef(null),G=s.useRef(null),J=s.useRef(null),K=s.useRef(0),Q=s.useCallback(()=>{const e=U.current;e&&(K.current=e.scrollTop)},[]),X=s.useRef(null),Z=s.useRef(null),ee=s.useRef(null),te=s.useRef(null),le=s.useRef(!1),ne=s.useRef(P);s.useEffect(()=>{ne.current!==P&&(le.current=!0),ne.current=P},[P]);const[ae,re]=s.useState(void 0),[ie,se]=s.useState(!1),oe=s.useRef(null),ce=s.useRef(!1),[de,ue]=s.useState(0),[me,fe]=s.useState(!1),pe=s.useCallback((e,t)=>{X.current=e,Z.current=t},[]),xe=s.useCallback(()=>{var e,t,l,n;if(!a)return;if(le.current)return;const r=window.innerHeight||0,i=(null===(e=_.current)||void 0===e?void 0:e.getBoundingClientRect().height)||0,s=(null===(t=ee.current)||void 0===t?void 0:t.scrollHeight)||0,o=(null===(l=te.current)||void 0===l?void 0:l.scrollHeight)||0,c=(null===(n=G.current)||void 0===n?void 0:n.scrollHeight)||0,d=Math.max(.9*r-i-16,0),u=Math.max(s,o);re(e=>{const t=u||void 0;return void 0===e&&void 0===t||"number"==typeof e&&"number"==typeof t&&Math.abs(e-t)<1?e:t}),se((u||c)>d),U.current&&(U.current.style.maxHeight=`${d}px`)},[a]);s.useLayoutEffect(()=>{xe()},[xe,P,j,C,T]),s.useEffect(()=>{const e=()=>xe();return a&&window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[a,xe]),s.useEffect(()=>{if(!a)return;const e=U.current;return e?(e.style.setProperty("overflow-anchor","none"),()=>{try{e.style.removeProperty("overflow-anchor")}catch(t){}}):void 0},[a]),s.useEffect(()=>{if(!a)return;const e=U.current;if(!e)return;const t=K.current;requestAnimationFrame(()=>{e&&e.scrollTop!==t&&(e.scrollTop=t)})},[a,w]),s.useEffect(()=>{},[a,A,j,n,N]),s.useEffect(()=>{if(!a)return;const e=X.current;if(!e)return;const t=document.getElementById(e);if(t&&document.activeElement!==t){t.focus({preventScroll:!0});const e=t,l=Z.current;null!=l&&"function"==typeof e.setSelectionRange&&requestAnimationFrame(()=>{try{e.setSelectionRange(l,l)}catch(t){}})}},[a,w]),s.useEffect(()=>{const e=e=>{"Escape"===e.key&&i()};return a&&window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a,i]),s.useEffect(()=>{if(a)return oe.current=document.body.style.overflow,document.body.style.overflow="hidden",document.body.classList.add("modal-open"),ce.current=!1,()=>{document.body.style.overflow=oe.current||"",document.body.classList.remove("modal-open")}},[a]),s.useEffect(()=>{if(!a||!A)return;const e=e=>w[e.name];for(const a of j){var t;const r=e(a);if(null!==(t=a.validation)&&void 0!==t&&t.required&&(void 0===r||""===r))return;if("number"===a.type){var l,n;const e=Number(r);if(!Number.isFinite(e))return;if(void 0!==(null===(l=a.validation)||void 0===l?void 0:l.min)&&e<a.validation.min)return;if(void 0!==(null===(n=a.validation)||void 0===n?void 0:n.max)&&e>a.validation.max)return}}E()},[A,j,w,a,C,de]);const ve=({children:e})=>"undefined"==typeof document?null:u.createPortal(e,document.body),be="undefined"!=typeof window&&window.innerWidth<=600;return o.jsx(ve,{children:o.jsxs("div",{className:"fixed inset-0 z-[999] p-4 "+(a?"pointer-events-auto":"pointer-events-none"),children:[o.jsx("div",{className:"calc-overlay absolute inset-0 transition-[opacity,backdrop-filter] duration-300 ease-in-out "+(a?"opacity-100":"opacity-0"),style:{backgroundColor:a?"rgba(0,0,0,0.4)":"rgba(0,0,0,0)",backdropFilter:a?"blur(10px)":"blur(0px)"},onClick:a?i:void 0,"aria-hidden":!a}),o.jsx(m,{children:a&&o.jsxs(f.div,{className:"absolute inset-0 flex items-center justify-center",initial:!ce.current&&{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25,ease:"easeInOut"},children:[o.jsx(f.div,{className:"relative z-[999] w-[94vw] sm:w-[85vw] md:w-[70vw] lg:w-[60vw] xl:w-[50vw] max-h-[90vh]",initial:!ce.current&&{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3,ease:"easeInOut"},onAnimationComplete:()=>{ce.current||(ce.current=!0)},onClick:e=>e.stopPropagation(),ref:J,children:o.jsxs("div",{className:"relative rounded-2xl bg-white shadow-xl ring-1 ring-black/5 flex flex-col max-h-[90vh] overflow-hidden calc-modal-card",children:[o.jsxs("div",{ref:_,className:"calc-header-desktop sticky top-0 z-10 px-5 py-4 border-b flex items-start justify-between bg-white/95 backdrop-blur",style:{background:`linear-gradient(to right, ${I}15, #ffffffEE)`},"aria-hidden":be||void 0,children:[o.jsxs("div",{className:"min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[g?o.jsx("span",{"aria-hidden":!0,className:"inline-flex items-center justify-center",children:g}):null,o.jsx("h2",{id:`${n}-title`,className:"flex-1 text-xl sm:text-2xl font-raleway font-bold text-black break-words whitespace-normal leading-snug min-w-0",style:{hyphens:"none"},children:x})]}),h?o.jsx("p",{id:`${n}-subtitle`,className:"text-sm text-slate-600 break-words whitespace-normal",style:{hyphens:"none"},children:h}):null]}),o.jsxs("div",{className:"flex items-center gap-2",children:[k&&k.length>0?o.jsx("div",{className:"relative",children:o.jsx("select",{"aria-label":"Seleccionar fórmula",className:"text-sm border rounded-md px-2 py-1",value:C,onChange:e=>S(e.target.value),children:k.map(e=>o.jsx("option",{value:e.id,children:e.label},e.id))})}):null,!(null==k||!k.length)&&o.jsx("button",{type:"button","aria-label":"Ver fórmulas",className:"inline-flex h-10 w-10 items-center justify-center rounded-lg hover:bg-slate-100 touch-manipulation",onClick:()=>L(!0),title:"Ver fórmulas","aria-hidden":be||void 0,children:o.jsx(c,{className:"w-5 h-5 text-slate-600"})}),o.jsx("button",{onClick:i,"aria-label":"Cerrar",className:"inline-flex h-10 w-10 items-center justify-center rounded-lg hover:bg-slate-100 touch-manipulation",children:o.jsx(d,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"calc-header-mobile hidden sticky top-0 z-10 px-4 pt-4 pb-3 border-b bg-white/95 backdrop-blur relative",style:{background:`linear-gradient(to right, ${I}15, #ffffffEE)`},"aria-hidden":!be||void 0,children:[g?o.jsx("span",{"aria-hidden":!0,className:"inline-flex items-center justify-center w-10 h-10 rounded-lg mb-2",style:{minWidth:"40px"},children:g}):o.jsx("div",{className:"h-8 mb-2"}),o.jsx("button",{onClick:i,"aria-label":"Cerrar",className:"absolute top-2 right-2 inline-flex h-11 w-11 items-center justify-center rounded-lg hover:bg-slate-100 touch-manipulation shadow-sm bg-white/90 backdrop-blur-sm pointer-events-auto",style:{zIndex:20},children:o.jsx(d,{className:"w-6 h-6"})}),k&&k.length>0&&o.jsxs("div",{className:"mb-2 relative",children:[o.jsx("select",{"aria-label":"Seleccionar fórmula (móvil)",className:"block w-full text-sm border rounded-md px-2 py-2 min-h-[44px] pr-14",value:C,onChange:e=>S(e.target.value),children:k.map(e=>o.jsx("option",{value:e.id,children:e.label},e.id))}),o.jsx("button",{type:"button","aria-label":"Ver fórmulas (móvil)",className:"absolute top-1/2 -translate-y-1/2 right-1 inline-flex h-11 w-11 items-center justify-center rounded-md border border-slate-200 bg-white/95 hover:bg-slate-100 touch-manipulation pointer-events-auto",onClick:()=>L(!0),title:"Ver fórmulas",style:{zIndex:20},"aria-hidden":!be||void 0,children:o.jsx(c,{className:"w-6 h-6 text-slate-600"})})]}),o.jsx("h2",{id:`${n}-title-mobile`,className:"text-lg font-raleway font-bold text-black leading-snug mb-1 break-words whitespace-normal",style:{wordBreak:"break-word",overflowWrap:"break-word",hyphens:"none",minHeight:"24px"},children:x}),h?o.jsx("p",{id:`${n}-subtitle-mobile`,className:"text-sm text-slate-600 leading-relaxed",style:{hyphens:"none"},children:h}):null]}),o.jsx("style",{children:"\n                @media (max-width:600px){\n                  .calc-header-desktop { display:none; }\n                  .calc-header-mobile { display:block; }\n                }\n                @media (max-width:350px){\n                  .calc-header-mobile h2 { font-size:15px; }\n                  .calc-header-mobile select { font-size:13px; }\n                }\n              "}),o.jsx("div",{ref:U,"data-testid":"calc-modal-body",className:"relative p-5 flex-1 min-h-0 overflow-y-auto overflow-x-hidden calc-modal-body overscroll-contain",children:o.jsx("div",{ref:G,children:o.jsx("div",{className:"relative w-full perspective-1200",style:{perspective:"1200px",WebkitPerspective:"1200px"},children:o.jsx(p,{reducedMotion:"never",children:o.jsxs(f.div,{initial:!1,className:"relative w-full preserve-3d flip-root "+(P?"is-flipped":""),style:{height:ae?`${ae}px`:void 0,transformStyle:"preserve-3d",WebkitTransformStyle:"preserve-3d",willChange:"transform",transformPerspective:1200,transition:"transform 0.6s ease"},animate:{rotateY:P?180:0},transition:{duration:.6,ease:"easeInOut"},onAnimationStart:()=>{le.current=!0},onAnimationComplete:()=>{le.current=!1,P||null==H||H()},children:[o.jsx("div",{ref:ee,className:"absolute inset-0 backface-hidden preserve-3d",style:{pointerEvents:P?"none":"auto",transformStyle:"preserve-3d",WebkitTransformStyle:"preserve-3d",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transform:"rotateY(0deg)"},"aria-hidden":P,children:o.jsxs("form",{noValidate:!0,className:"grid grid-cols-1 md:grid-cols-2 gap-4",onSubmit:e=>{e.preventDefault(),E()},onFocusCapture:e=>{const t=e.target;if(t&&("INPUT"===t.tagName||"SELECT"===t.tagName||"true"===t.getAttribute("contenteditable"))&&(Q(),X.current=t.id||null,"INPUT"===t.tagName)){const e=t;Z.current="number"==typeof e.selectionStart?e.selectionStart:null}},children:[j.map((e,t)=>o.jsx(y,{field:e,modalId:n,value:w[e.name],onValueChange:N,isTestEnv:q,autoCalculate:A,setInputTick:ue,firstRef:0===t?V:void 0,error:$,recordCaret:pe,captureBodyScrollTop:Q},e.name)),$&&o.jsx("div",{className:"md:col-span-2 text-sm text-rose-600",children:$}),"hidden"!==z&&o.jsxs("div",{className:"md:col-span-2 mt-2 flex items-center gap-3",children:["default"===z&&(()=>{if(void 0!==M?M(w):Y)return o.jsx("button",{type:"submit",className:"px-4 py-2 rounded-md text-white font-semibold",style:{backgroundColor:I},children:"Calcular"});const e=D(w)||"Complete los campos requeridos";return o.jsx("button",{type:"button",onClick:()=>E(),className:"px-4 py-2 rounded-md text-white font-semibold opacity-50 cursor-not-allowed",style:{backgroundColor:I},"aria-disabled":!0,title:e,children:"Calcular"})})(),o.jsx("button",{type:"button",onClick:O,className:"px-4 py-2 rounded-md border",children:"Limpiar"})]})]})}),o.jsxs("div",{ref:te,className:"absolute inset-0 backface-hidden preserve-3d rotate-y-180",style:{pointerEvents:P?"auto":"none",transformStyle:"preserve-3d",WebkitTransformStyle:"preserve-3d",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transform:"rotateY(180deg)"},"aria-hidden":!P,children:[o.jsx("div",{className:`rounded-xl border p-6 text-center ${b(null==F?void 0:F.severity)}`,children:F?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-sm uppercase tracking-wide opacity-70 mb-1",children:"Resultado"}),o.jsxs("div",{className:"text-3xl font-mono font-bold",children:["number"==typeof F.value?F.value.toString():F.value,F.unit?o.jsx("span",{className:"ml-1 text-base font-sans",children:F.unit}):null]}),F.interpretation?o.jsx("div",{className:"mt-2 text-base font-semibold",children:F.interpretation}):null,F.detailsHtml?o.jsx("div",{className:"mt-3 text-sm leading-relaxed",children:F.detailsHtml}):null]}):o.jsx("div",{className:"text-slate-600",children:"Complete los campos y presione Calcular."})}),o.jsx("div",{className:"mt-4 flex justify-center",children:"volver"===W?o.jsx("button",{type:"button",onClick:R,className:"px-4 py-2 rounded-md border",children:"Volver"}):o.jsx("button",{type:"button",onClick:O,className:"px-4 py-2 rounded-md border",children:"Limpiar"})})]})]})})})})})]})}),T&&o.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",style:{backdropFilter:"blur(10px)"},onClick:()=>L(!1)}),o.jsxs("div",{className:"relative z-10 w-[90vw] max-w-[600px] max-h-[85vh] overflow-y-auto rounded-2xl bg-white shadow-lg ring-1 ring-slate-200 p-5",children:[o.jsx("button",{onClick:()=>L(!1),"aria-label":"Cerrar",className:"absolute top-3 right-3 inline-flex h-10 w-10 items-center justify-center rounded-md hover:bg-slate-100 bg-white/90 shadow-sm",style:{zIndex:10},children:o.jsx(d,{className:"w-5 h-5"})}),o.jsx("div",{className:"flex items-start justify-between mb-2 pr-10",children:o.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"Fórmulas"})}),o.jsx("div",{className:"space-y-3",children:k&&k.length>0?k.map((n,a)=>{var r;const i=function(t){if(t.expressionLatex)return t.expressionLatex;if(t.formulaLatex)return t.formulaLatex;const n=t.expressionText||t.description;return n?function(t){const n=t.replace(/\\/g,"\\\\").replace(/([{}_#%&$])/g,"\\$1").replace(/\n/g," ");return String.raw(e||(e=l`\text{${0}}`),n)}(n):null}(n),c=!!n.scoring&&(null===(r=n.scoring.rows)||void 0===r?void 0:r.length);return o.jsxs("div",{"data-testid":`formula-item-${a+1}`,className:"rounded-xl bg-slate-50 p-3",children:[o.jsxs("div",{className:"text-sm font-semibold text-slate-800",children:[a+1,". ",n.label]}),i?o.jsx("div",{className:"mt-1 overflow-x-auto","data-testid":"formula-latex",children:o.jsx(s.Suspense,{fallback:o.jsx("div",{className:"text-sm text-slate-500",children:"Cargando fórmulas…"}),children:o.jsx(v,{expression:i,display:!0,className:"block text-sky-700 dark:text-sky-300 text-base"})})}):null,c?o.jsxs("div",{className:"mt-2 space-y-2",children:[!i&&o.jsx("div",{"data-testid":"formula-latex",className:"overflow-x-auto",children:o.jsx(s.Suspense,{fallback:o.jsx("div",{className:"text-sm text-slate-500",children:"Cargando fórmulas…"}),children:o.jsx(v,{expression:String.raw(t||(t=l`\\mathrm{Puntuaci\\'on}=\\sum_{i=1}^{n}\\text{Puntos}(i)`)),display:!0,className:"block text-sky-700 dark:text-sky-300 text-base"})})}),o.jsx("div",{className:"space-y-2",children:n.scoring.rows.map((e,t)=>o.jsxs("div",{className:"rounded-lg bg-white border border-slate-200 p-2",children:[o.jsx("div",{className:"text-xs font-semibold text-slate-700",children:e.label}),o.jsx("ul",{className:"mt-1 space-y-1",children:e.options.map((e,t)=>o.jsxs("li",{className:"text-xs text-slate-600 flex items-start gap-2",children:[o.jsxs("span",{className:"inline-block min-w-12 rounded border border-slate-200 px-1 py-0.5 text-[11px] text-slate-700",children:[e.points," pt"]}),o.jsx("span",{className:"flex-1",children:e.label})]},t))})]},t))})]}):i?null:o.jsx("div",{className:"mt-1 text-xs italic text-slate-500",children:"Fórmula o sistema de puntuación no disponible"})]},n.id)}):o.jsx("div",{className:"text-sm text-slate-600",children:"No hay fórmulas disponibles."})})]})]})]})})]})})}),y=s.memo(({field:e,modalId:t,value:l,onValueChange:n,isTestEnv:a,autoCalculate:r,setInputTick:i,firstRef:s,error:c,recordCaret:d,captureBodyScrollTop:u})=>{const m=`${t}-${e.name}`,f=e.label;var p;return"number"===e.type?o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{htmlFor:m,className:"text-sm font-medium",children:f}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{id:m,name:e.name,type:"text",inputMode:"decimal",lang:"es-ES",className:"w-full rounded-md border px-3 py-2",placeholder:e.placeholder||"p. ej., 0","aria-label":f,onWheel:e=>{e.stopPropagation()},value:"number"==typeof l||"string"==typeof l?l:"",onChange:t=>{u();const l=t.target.value;d(m,"number"==typeof t.target.selectionStart?t.target.selectionStart:null),n(e.name,l),a&&r&&i(e=>e+1)},"aria-invalid":!(!c||void 0!==l&&""!==l||null===(p=e.validation)||void 0===p||!p.required)||void 0,ref:s}),e.unit?o.jsx("span",{className:"text-sm text-slate-500",children:e.unit}):null]})]}):"text"===e.type?o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{htmlFor:m,className:"text-sm font-medium",children:f}),o.jsx("input",{id:m,name:e.name,type:"text",className:"w-full rounded-md border px-3 py-2",placeholder:e.placeholder,"aria-label":f,value:"string"==typeof l?l:"",onChange:t=>{u(),a&&i(e=>e+1),d(m,"number"==typeof t.target.selectionStart?t.target.selectionStart:null),n(e.name,t.target.value)},ref:s})]}):"select"===e.type?o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{htmlFor:m,className:"text-sm font-medium",children:f}),o.jsxs("select",{id:m,name:e.name,className:"w-full rounded-md border px-3 py-2","aria-label":f,value:"string"==typeof l?l:"",onChange:t=>{u(),a&&i(e=>e+1),n(e.name,t.target.value)},ref:s,children:[o.jsx("option",{value:"",disabled:!0,children:e.placeholder||"Seleccione..."}),(e.options||[]).map(e=>o.jsx("option",{value:e.value,children:e.label},e.value))]})]}):"toggle"===e.type?o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm font-medium",children:f}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx("input",{id:m,name:e.name,type:"checkbox",checked:!!l,onChange:t=>{u(),n(e.name,t.target.checked)}}),o.jsx("label",{htmlFor:m,className:"text-sm",children:e.placeholder||e.label})]})]}):null});y.displayName="FieldRow"}}})}();
