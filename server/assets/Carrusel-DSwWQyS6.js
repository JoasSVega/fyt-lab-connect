import{jsx as e,jsxs as r}from"react/jsx-runtime";import*as a from"react";import t from"react";import{k as l,B as o,z as s,C as i}from"./main.ssg-CDsK34Qu.js";import n from"embla-carousel-react";import{ArrowLeft as c,ArrowRight as d}from"lucide-react";import{S as m}from"./SmartImage-Cs9LJIqe.js";import"react-dom/server";import"react-router-dom/server.mjs";import"@tanstack/react-query";import"@radix-ui/react-toast";import"class-variance-authority";import"clsx";import"tailwind-merge";import"next-themes";import"sonner";import"@radix-ui/react-tooltip";import"react-router-dom";import"@radix-ui/react-slot";import"framer-motion";const u=a.createContext(null);function f(){const e=a.useContext(u);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}const p=a.forwardRef(({orientation:r="horizontal",opts:t,setApi:o,plugins:s,className:i,children:c,...d},m)=>{const[f,p]=n({...t,axis:"horizontal"===r?"x":"y"},s),[h,w]=a.useState(!1),[x,v]=a.useState(!1),g=a.useCallback(e=>{e&&(w(e.canScrollPrev()),v(e.canScrollNext()))},[]),N=a.useCallback(()=>{null==p||p.scrollPrev()},[p]),y=a.useCallback(()=>{null==p||p.scrollNext()},[p]),b=a.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),N()):"ArrowRight"===e.key&&(e.preventDefault(),y())},[N,y]);return a.useEffect(()=>{p&&o&&o(p)},[p,o]),a.useEffect(()=>{if(p)return g(p),p.on("reInit",g),p.on("select",g),()=>{null==p||p.off("select",g)}},[p,g]),e(u.Provider,{value:{carouselRef:f,api:p,opts:t,orientation:r||("y"===(null==t?void 0:t.axis)?"vertical":"horizontal"),scrollPrev:N,scrollNext:y,canScrollPrev:h,canScrollNext:x},children:e("div",{ref:m,onKeyDownCapture:b,className:l("relative",i),role:"region","aria-roledescription":"carousel",...d,children:c})})});p.displayName="Carousel";const h=a.forwardRef(({className:r,...a},t)=>{const{carouselRef:o,orientation:s}=f();return e("div",{ref:o,className:"overflow-hidden py-3 px-2 md:px-4",children:e("div",{ref:t,className:l("flex","horizontal"===s?"":"flex-col",r),...a})})});h.displayName="CarouselContent";const w=a.forwardRef(({className:r,...a},t)=>{const{orientation:o}=f();return e("div",{ref:t,role:"group","aria-roledescription":"slide",className:l("min-w-0 shrink-0 grow-0 basis-full","horizontal"===o?"":"pt-4",r),...a})});w.displayName="CarouselItem";const x=a.forwardRef(({className:a,variant:t="outline",size:s="icon",...i},n)=>{const{orientation:d,scrollPrev:m,canScrollPrev:u,opts:p}=f();return r(o,{ref:n,variant:t,size:s,className:l("absolute h-8 w-8 rounded-full","horizontal"===d?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",a),disabled:!u&&!(null==p?void 0:p.loop),onClick:m,...i,children:[e(c,{className:"h-4 w-4"}),e("span",{className:"sr-only",children:"Previous slide"})]})});x.displayName="CarouselPrevious";const v=a.forwardRef(({className:a,variant:t="outline",size:s="icon",...i},n)=>{const{orientation:c,scrollNext:m,canScrollNext:u,opts:p}=f();return r(o,{ref:n,variant:t,size:s,className:l("absolute h-8 w-8 rounded-full","horizontal"===c?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",a),disabled:!u&&!(null==p?void 0:p.loop),onClick:m,...i,children:[e(d,{className:"h-4 w-4"}),e("span",{className:"sr-only",children:"Next slide"})]})});v.displayName="CarouselNext";const g=({items:a,color:l="#9B59B6",height:o="",imageAspect:n="4 / 3",showDescription:c=!0,className:d,imageClassName:u})=>{const[f,g]=t.useState(null),[N,y]=t.useState(0),[b,S]=t.useState(!1),C=t.useRef(new Set([0,1,2])),k="undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(max-width: 640px)").matches,z=k?"-small.webp":"-medium.webp",E=a.slice(0,3).map(e=>`${(e.image||"").replace(/-(small|medium|large)\.webp$/i,"")}${z}`),{loaded:P}=s(E,{priority:"high",timeout:8e3});t.useEffect(()=>{if(!f||!P)return;const e=()=>{const e=f.selectedScrollSnap(),r=a.length,t=new Set;for(let a=-2;a<=2;a++){const l=(e+a+r)%r;t.add(l)}t.forEach(e=>{if(!C.current.has(e)){C.current.add(e);const r=a[e];if(r){const e=r.image.replace(/-medium\.webp$/i,""),a=["-small.webp"];!k&&("undefined"!=typeof window&&window.devicePixelRatio>1||"undefined"!=typeof window&&window.innerWidth>=768)&&a.push("-medium.webp"),a.forEach(r=>{(new Image).src=`${e}${r}`})}}})};return e(),f.on("select",e),()=>{f.off("select",e)}},[f,a,P]),t.useEffect(()=>{if(!f)return;const e=()=>y(f.selectedScrollSnap());return e(),f.on("select",e),f.on("reInit",e),()=>{f.off("select",e),f.off("reInit",e)}},[f]),t.useEffect(()=>{if(f)try{f.reInit()}catch(e){}},[f,a.length]),t.useEffect(()=>{if(!f)return;if("undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const e=setInterval(()=>{if(!(b||"undefined"!=typeof document&&document.hidden))try{f.canScrollNext()&&f.scrollNext()}catch{}},4e3);return()=>clearInterval(e)},[f,b]);const R=o?"number"==typeof o?`${o}px`:o:"",I=u||"w-full h-full object-cover";return t.useEffect(()=>{if(!f)return;let e=null;const r=()=>{e&&window.clearTimeout(e),e=window.setTimeout(()=>{try{f.reInit()}catch(e){}},150)};return window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r),e&&window.clearTimeout(e)}},[f]),P?r("div",{onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),className:d||"w-full max-w-[1800px] mx-auto px-4 md:px-8",children:[r(p,{opts:{align:"center",loop:!0,containScroll:"keepSnaps",slidesToScroll:1},setApi:g,className:"w-full",children:[e(h,{className:"gap-x-4",children:a.map((a,t)=>e(w,{className:"px-2 md:px-4 basis-[66%] sm:basis-[66%] md:basis-[50%] lg:basis-[33.333%] xl:basis-[25%] 2xl:basis-[20%] min-w-[280px] md:min-w-[320px] max-w-[520px]",children:r(i,{style:{borderColor:l},className:"bg-white/90 border-2 shadow-soft md:hover:shadow-medium md:hover:scale-[1.02] transition-all duration-300 overflow-hidden group h-full will-change-transform",children:[e("div",{className:"relative bg-gray-100",style:R?{height:R}:{aspectRatio:n},children:e(m,{basePath:a.image,alt:a.title,usage:"card",priority:t<2,fallbackSize:"small",decoding:"async",className:I,style:R?{height:"100%",maxHeight:R,minHeight:R}:{height:"100%"},width:1200,height:900})}),r("div",{className:"p-6",children:[e("h4",{className:"text-[clamp(1rem,1.4vw,1.125rem)] md:text-[clamp(1.05rem,1.2vw,1.25rem)] font-raleway font-semibold mb-3 leading-snug break-normal whitespace-normal",style:{color:l,hyphens:"none",overflowWrap:"normal",wordBreak:"normal"},children:a.title}),c&&a.description&&e("p",{className:"text-[clamp(0.92rem,1.2vw,1rem)] font-inter text-gray-700 leading-relaxed text-left break-normal whitespace-normal",style:{hyphens:"none",overflowWrap:"normal",wordBreak:"normal"},children:a.description})]})]})},t))}),e(x,{className:"hidden md:flex -left-10 lg:-left-12"}),e(v,{className:"hidden md:flex -right-10 lg:-right-12"})]}),e("div",{className:"flex items-center justify-center mt-4 space-x-2",children:a.map((r,a)=>e("button",{onClick:()=>f&&f.scrollTo(a),"aria-label":`Go to slide ${a+1}`,"aria-current":N===a,className:"h-2 w-6 md:w-8 rounded-full transition-all "+(N===a?"scale-110":"bg-gray-300"),style:{backgroundColor:N===a?l:void 0}},a))})]}):e("div",{className:d||"w-full max-w-[1800px] mx-auto px-4 md:px-8",children:e("div",{className:"w-full flex items-center justify-center",style:{minHeight:R||"18rem"},children:e("div",{className:"animate-pulse flex space-x-4",children:r("div",{className:"flex-1 space-y-4 py-1",children:[e("div",{className:"h-4 bg-gray-300 rounded w-3/4"}),r("div",{className:"space-y-2",children:[e("div",{className:"h-4 bg-gray-300 rounded"}),e("div",{className:"h-4 bg-gray-300 rounded w-5/6"})]})]})})})})};export{g as default};
