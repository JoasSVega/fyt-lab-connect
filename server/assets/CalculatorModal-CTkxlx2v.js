import{jsxs as e,jsx as t,Fragment as l}from"react/jsx-runtime";import a from"react";import{AnimatePresence as n,motion as i,MotionConfig as r}from"framer-motion";import{createPortal as o}from"react-dom";import{Info as s,X as c}from"lucide-react";function d(e,t,l){if(!t||!l)return e;const a=t.find(e=>e.id===l);return(null==a?void 0:a.fields)&&a.fields.length>0?a.fields:e}const u=a.lazy(()=>import("./Latex-BFQ57_gJ.js")),m=e=>{switch(e){case"green":return"bg-emerald-50 text-emerald-700 border-emerald-200";case"yellow":return"bg-amber-50 text-amber-700 border-amber-200";case"red":return"bg-rose-50 text-rose-700 border-rose-200";default:return"bg-slate-50 text-slate-800 border-slate-200"}},f=({id:l,title:n,subtitle:i,icon:r,fields:o,formulas:s,onCalculate:c,categoryColor:u="#0ea5e9",open:m,onOpenChange:f,autoCalculate:b=!1,actionVisibility:v="default",openButtonLabel:h="Abrir Calculadora",backAction:x="volver",enableCalculatePredicate:y})=>{const g="boolean"==typeof m&&!!f,[N,w]=a.useState(!1),k=g?m:N,[C,S]=a.useState(()=>({})),[E,R]=a.useState(()=>{var e;return null==(e=null==s?void 0:s[0])?void 0:e.id}),[F,$]=a.useState(null),[I,T]=a.useState(!1),[L,V]=a.useState(""),[j,z]=a.useState(!1),[A,P]=a.useState(0),O=a.useRef(null),W=a.useRef(!1),B=a.useCallback(e=>e.replace(",","."),[]),H=a.useCallback(e=>{var t,l,a;const n=d(o,s,E);for(const i of n){const n=e[i.name];if((null==(t=i.validation)?void 0:t.required)&&(void 0===n||""===n))return`Complete el campo: ${i.label}`;if("number"===i.type){const e=Number(n);if(""!==n&&Number.isFinite(e)){if(void 0!==(null==(l=i.validation)?void 0:l.min)&&e<i.validation.min)return`${i.label}: valor mínimo ${i.validation.min}`;if(void 0!==(null==(a=i.validation)?void 0:a.max)&&e>i.validation.max)return`${i.label}: valor máximo ${i.validation.max}`}}}return null},[o,s,E]);a.useEffect(()=>{k&&(S({}),$(null),T(!1),V(""),P(e=>e+1))},[k]);const q=()=>{g?null==f||f(!1):w(!1)},M=(e,t)=>{S(l=>l[e]===t?l:{...l,[e]:t})},Y=()=>{S({}),$(null),T(!1),V(""),P(e=>e+1)},U=()=>{V("");const e={...C},t=d(o,s,E);{const t=H(e);if(t)return void V(t)}const l={...e};for(const i of t)if("number"===i.type){const t=e[i.name];if(void 0===t||""===t)continue;const a="string"==typeof t?B(t):String(t),n=Number(a);l[i.name]=Number.isFinite(n)?n:t}let a=null;const n=E;if(n&&(null==s?void 0:s.length)){const e=s.find(e=>e.id===n);if(!e||!e.compute)return void V("Fórmula no disponible");a=e.compute(l)}else{if(!c)return void V("No hay lógica de cálculo definida");a=c(l,n)}$(a),I||T(!0)},_=()=>{I&&(T(!1),W.current=!0)},D=()=>{W.current&&!I&&(W.current=!1,$(null),setTimeout(()=>{var e,t;return null==(t=null==(e=O.current)?void 0:e.focus)?void 0:t.call(e)},10))},G=a.useMemo(()=>d(o,s,E),[o,s,E]);return a.useEffect(()=>{S(e=>({})),V(""),$(null),T(!1),setTimeout(()=>{var e,t;null==(t=null==(e=O.current)?void 0:e.focus)||t.call(e)},50),P(e=>e+1)},[G]),g?t(p,{id:l,open:k,onClose:q,title:n,subtitle:i,icon:r,fields:G,values:C,onInput:M,formulas:s,selectedFormula:E,onSelectFormula:R,onCalculate:U,onClear:Y,onReturn:_,result:F,flipped:I,error:L,categoryColor:u,infoOpen:j,setInfoOpen:z,firstInputRef:O,autoCalculate:b,actionVisibility:v,backAction:x,resetTick:A,onFlipAnimationComplete:D,enableCalculatePredicate:y}):e("div",{children:[t("button",{onClick:()=>{g||w(!0)},className:"px-4 py-2 rounded-md text-white font-semibold focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",style:{backgroundColor:u},children:h}),t(p,{id:l,open:N,onClose:q,title:n,subtitle:i,icon:r,fields:G,values:C,onInput:M,formulas:s,selectedFormula:E,onSelectFormula:R,onCalculate:U,onClear:Y,onReturn:_,result:F,flipped:I,error:L,categoryColor:u,infoOpen:j,setInfoOpen:z,firstInputRef:O,autoCalculate:b,actionVisibility:v,backAction:x,resetTick:A,onFlipAnimationComplete:D,enableCalculatePredicate:y})]})},p=({id:d,open:f,onClose:p,title:v,subtitle:h,icon:x,fields:y,values:g,onInput:N,formulas:w,selectedFormula:k,onSelectFormula:C,onCalculate:S,onClear:E,onReturn:R,result:F,flipped:$,error:I,categoryColor:T,infoOpen:L,setInfoOpen:V,firstInputRef:j,autoCalculate:z=!1,actionVisibility:A="default",backAction:P="volver",resetTick:O,onFlipAnimationComplete:W,enableCalculatePredicate:B})=>{const H=void 0!==import.meta&&!1;a.useCallback(e=>e.replace(",","."),[]);const q=a.useCallback(e=>{var t,l,a;for(const n of y){const i=e[n.name];if((null==(t=n.validation)?void 0:t.required)&&(void 0===i||""===i))return`Complete el campo: ${n.label}`;if("number"===n.type){const e=Number(i);if(""!==i&&Number.isFinite(e)){if(void 0!==(null==(l=n.validation)?void 0:l.min)&&e<n.validation.min)return`${n.label}: valor mínimo ${n.validation.min}`;if(void 0!==(null==(a=n.validation)?void 0:a.max)&&e>n.validation.max)return`${n.label}: valor máximo ${n.validation.max}`}}}return null},[y]),M=a.useMemo(()=>null===q(g),[g,q]),Y=a.useRef(null),U=a.useRef(null),_=a.useRef(null),D=a.useRef(null),G=a.useRef(0),J=a.useCallback(()=>{const e=U.current;e&&(G.current=e.scrollTop)},[]),K=a.useRef(null),Q=a.useRef(null),X=a.useRef(null),Z=a.useRef(null),ee=a.useRef(!1),te=a.useRef($);a.useEffect(()=>{te.current!==$&&(ee.current=!0),te.current=$},[$]);const[le,ae]=a.useState(void 0),[ne,ie]=a.useState(!1),re=a.useRef(null),oe=a.useRef(!1),[se,ce]=a.useState(0),[de,ue]=a.useState(!1),me=a.useCallback((e,t)=>{K.current=e,Q.current=t},[]),fe=a.useCallback(()=>{var e,t,l,a;if(!f)return;if(ee.current)return;const n=window.innerHeight||0,i=(null==(e=Y.current)?void 0:e.getBoundingClientRect().height)||0,r=(null==(t=X.current)?void 0:t.scrollHeight)||0,o=(null==(l=Z.current)?void 0:l.scrollHeight)||0,s=(null==(a=_.current)?void 0:a.scrollHeight)||0,c=Math.max(.9*n-i-16,0),d=Math.max(r,o);ae(e=>{const t=d||void 0;return void 0===e&&void 0===t||"number"==typeof e&&"number"==typeof t&&Math.abs(e-t)<1?e:t}),ie((d||s)>c),U.current&&(U.current.style.maxHeight=`${c}px`)},[f]);a.useLayoutEffect(()=>{fe()},[fe,$,y,k,L]),a.useEffect(()=>{const e=()=>fe();return f&&window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[f,fe]),a.useEffect(()=>{if(!f)return;const e=U.current;return e?(e.style.setProperty("overflow-anchor","none"),()=>{try{e.style.removeProperty("overflow-anchor")}catch{}}):void 0},[f]),a.useEffect(()=>{if(!f)return;const e=U.current;if(!e)return;const t=G.current;requestAnimationFrame(()=>{e&&e.scrollTop!==t&&(e.scrollTop=t)})},[f,g]),a.useEffect(()=>{},[f,z,y,d,N]),a.useEffect(()=>{if(!f)return;const e=K.current;if(!e)return;const t=document.getElementById(e);if(t&&document.activeElement!==t){t.focus({preventScroll:!0});const e=t,l=Q.current;null!=l&&"function"==typeof e.setSelectionRange&&requestAnimationFrame(()=>{try{e.setSelectionRange(l,l)}catch{}})}},[f,g]),a.useEffect(()=>{const e=e=>{"Escape"===e.key&&p()};return f&&window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f,p]),a.useEffect(()=>{if(f)return re.current=document.body.style.overflow,document.body.style.overflow="hidden",document.body.classList.add("modal-open"),oe.current=!1,()=>{document.body.style.overflow=re.current||"",document.body.classList.remove("modal-open")}},[f]),a.useEffect(()=>{var e,t,l;if(!f||!z)return;const a=e=>g[e.name];for(const n of y){const i=a(n);if((null==(e=n.validation)?void 0:e.required)&&(void 0===i||""===i))return;if("number"===n.type){const e=Number(i);if(!Number.isFinite(e))return;if(void 0!==(null==(t=n.validation)?void 0:t.min)&&e<n.validation.min)return;if(void 0!==(null==(l=n.validation)?void 0:l.max)&&e>n.validation.max)return}}S()},[z,y,g,f,k,se]);const pe=({children:e})=>"undefined"==typeof document?null:o(e,document.body),be="undefined"!=typeof window&&window.innerWidth<=600;return t(pe,{children:e("div",{className:"fixed inset-0 z-[999] p-4 "+(f?"pointer-events-auto":"pointer-events-none"),children:[t("div",{className:"calc-overlay absolute inset-0 transition-[opacity,backdrop-filter] duration-300 ease-in-out "+(f?"opacity-100":"opacity-0"),style:{backgroundColor:f?"rgba(0,0,0,0.4)":"rgba(0,0,0,0)",backdropFilter:f?"blur(10px)":"blur(0px)"},onClick:f?p:void 0,"aria-hidden":!f}),t(n,{children:f&&e(i.div,{className:"absolute inset-0 flex items-center justify-center",initial:!oe.current&&{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25,ease:"easeInOut"},children:[t(i.div,{className:"relative z-[999] w-[94vw] sm:w-[85vw] md:w-[70vw] lg:w-[60vw] xl:w-[50vw] max-h-[90vh]",initial:!oe.current&&{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3,ease:"easeInOut"},onAnimationComplete:()=>{oe.current||(oe.current=!0)},onClick:e=>e.stopPropagation(),ref:D,children:e("div",{className:"relative rounded-2xl bg-white shadow-xl ring-1 ring-black/5 flex flex-col max-h-[90vh] overflow-hidden calc-modal-card",children:[e("div",{ref:Y,className:"calc-header-desktop sticky top-0 z-10 px-5 py-4 border-b flex items-start justify-between bg-white/95 backdrop-blur",style:{background:`linear-gradient(to right, ${T}15, #ffffffEE)`},"aria-hidden":be||void 0,children:[e("div",{className:"min-w-0",children:[e("div",{className:"flex items-center gap-2 min-w-0",children:[x?t("span",{"aria-hidden":!0,className:"inline-flex items-center justify-center",children:x}):null,t("h2",{id:`${d}-title`,className:"flex-1 text-xl sm:text-2xl font-raleway font-bold text-black break-words whitespace-normal leading-snug min-w-0",style:{hyphens:"none"},children:v})]}),h?t("p",{id:`${d}-subtitle`,className:"text-sm text-slate-600 break-words whitespace-normal",style:{hyphens:"none"},children:h}):null]}),e("div",{className:"flex items-center gap-2",children:[w&&w.length>0?t("div",{className:"relative",children:t("select",{"aria-label":"Seleccionar fórmula",className:"text-sm border rounded-md px-2 py-1",value:k,onChange:e=>C(e.target.value),children:w.map(e=>t("option",{value:e.id,children:e.label},e.id))})}):null,!!(null==w?void 0:w.length)&&t("button",{type:"button","aria-label":"Ver fórmulas",className:"inline-flex h-10 w-10 items-center justify-center rounded-lg hover:bg-slate-100 touch-manipulation",onClick:()=>V(!0),title:"Ver fórmulas","aria-hidden":be||void 0,children:t(s,{className:"w-5 h-5 text-slate-600"})}),t("button",{onClick:p,"aria-label":"Cerrar",className:"inline-flex h-10 w-10 items-center justify-center rounded-lg hover:bg-slate-100 touch-manipulation",children:t(c,{className:"w-5 h-5"})})]})]}),e("div",{className:"calc-header-mobile hidden sticky top-0 z-10 px-4 pt-4 pb-3 border-b bg-white/95 backdrop-blur relative",style:{background:`linear-gradient(to right, ${T}15, #ffffffEE)`},"aria-hidden":!be||void 0,children:[x?t("span",{"aria-hidden":!0,className:"inline-flex items-center justify-center w-10 h-10 rounded-lg mb-2",style:{minWidth:"40px"},children:x}):t("div",{className:"h-8 mb-2"}),t("button",{onClick:p,"aria-label":"Cerrar",className:"absolute top-2 right-2 inline-flex h-11 w-11 items-center justify-center rounded-lg hover:bg-slate-100 touch-manipulation shadow-sm bg-white/90 backdrop-blur-sm pointer-events-auto",style:{zIndex:20},children:t(c,{className:"w-6 h-6"})}),w&&w.length>0&&e("div",{className:"mb-2 relative",children:[t("select",{"aria-label":"Seleccionar fórmula (móvil)",className:"block w-full text-sm border rounded-md px-2 py-2 min-h-[44px] pr-14",value:k,onChange:e=>C(e.target.value),children:w.map(e=>t("option",{value:e.id,children:e.label},e.id))}),t("button",{type:"button","aria-label":"Ver fórmulas (móvil)",className:"absolute top-1/2 -translate-y-1/2 right-1 inline-flex h-11 w-11 items-center justify-center rounded-md border border-slate-200 bg-white/95 hover:bg-slate-100 touch-manipulation pointer-events-auto",onClick:()=>V(!0),title:"Ver fórmulas",style:{zIndex:20},"aria-hidden":!be||void 0,children:t(s,{className:"w-6 h-6 text-slate-600"})})]}),t("h2",{id:`${d}-title-mobile`,className:"text-lg font-raleway font-bold text-black leading-snug mb-1 break-words whitespace-normal",style:{wordBreak:"break-word",overflowWrap:"break-word",hyphens:"none",minHeight:"24px"},children:v}),h?t("p",{id:`${d}-subtitle-mobile`,className:"text-sm text-slate-600 leading-relaxed",style:{hyphens:"none"},children:h}):null]}),t("style",{children:"\n                @media (max-width:600px){\n                  .calc-header-desktop { display:none; }\n                  .calc-header-mobile { display:block; }\n                }\n                @media (max-width:350px){\n                  .calc-header-mobile h2 { font-size:15px; }\n                  .calc-header-mobile select { font-size:13px; }\n                }\n              "}),t("div",{ref:U,"data-testid":"calc-modal-body",className:"relative p-5 flex-1 min-h-0 overflow-y-auto overflow-x-hidden calc-modal-body overscroll-contain",children:t("div",{ref:_,children:t("div",{className:"relative w-full perspective-1200",style:{perspective:"1200px",WebkitPerspective:"1200px"},children:t(r,{reducedMotion:"never",children:e(i.div,{initial:!1,className:"relative w-full preserve-3d flip-root "+($?"is-flipped":""),style:{height:le?`${le}px`:void 0,transformStyle:"preserve-3d",WebkitTransformStyle:"preserve-3d",willChange:"transform",transformPerspective:1200,transition:"transform 0.6s ease"},animate:{rotateY:$?180:0},transition:{duration:.6,ease:"easeInOut"},onAnimationStart:()=>{ee.current=!0},onAnimationComplete:()=>{ee.current=!1,$||null==W||W()},children:[t("div",{ref:X,className:"absolute inset-0 backface-hidden preserve-3d",style:{pointerEvents:$?"none":"auto",transformStyle:"preserve-3d",WebkitTransformStyle:"preserve-3d",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transform:"rotateY(0deg)"},"aria-hidden":$,children:e("form",{noValidate:!0,className:"grid grid-cols-1 md:grid-cols-2 gap-4",onSubmit:e=>{e.preventDefault(),S()},onFocusCapture:e=>{const t=e.target;if(t&&("INPUT"===t.tagName||"SELECT"===t.tagName||"true"===t.getAttribute("contenteditable"))&&(J(),K.current=t.id||null,"INPUT"===t.tagName)){const e=t;Q.current="number"==typeof e.selectionStart?e.selectionStart:null}},children:[y.map((e,l)=>t(b,{field:e,modalId:d,value:g[e.name],onValueChange:N,isTestEnv:H,autoCalculate:z,setInputTick:ce,firstRef:0===l?j:void 0,error:I,recordCaret:me,captureBodyScrollTop:J},e.name)),I&&t("div",{className:"md:col-span-2 text-sm text-rose-600",children:I}),"hidden"!==A&&e("div",{className:"md:col-span-2 mt-2 flex items-center gap-3",children:["default"===A&&(()=>{if(void 0!==B?B(g):M)return t("button",{type:"submit",className:"px-4 py-2 rounded-md text-white font-semibold",style:{backgroundColor:T},children:"Calcular"});const e=q(g)||"Complete los campos requeridos";return t("button",{type:"button",onClick:()=>S(),className:"px-4 py-2 rounded-md text-white font-semibold opacity-50 cursor-not-allowed",style:{backgroundColor:T},"aria-disabled":!0,title:e,children:"Calcular"})})(),t("button",{type:"button",onClick:E,className:"px-4 py-2 rounded-md border",children:"Limpiar"})]})]})}),e("div",{ref:Z,className:"absolute inset-0 backface-hidden preserve-3d rotate-y-180",style:{pointerEvents:$?"auto":"none",transformStyle:"preserve-3d",WebkitTransformStyle:"preserve-3d",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transform:"rotateY(180deg)"},"aria-hidden":!$,children:[t("div",{className:`rounded-xl border p-6 text-center ${m(null==F?void 0:F.severity)}`,children:F?e(l,{children:[t("div",{className:"text-sm uppercase tracking-wide opacity-70 mb-1",children:"Resultado"}),e("div",{className:"text-3xl font-mono font-bold",children:["number"==typeof F.value?F.value.toString():F.value,F.unit?t("span",{className:"ml-1 text-base font-sans",children:F.unit}):null]}),F.interpretation?t("div",{className:"mt-2 text-base font-semibold",children:F.interpretation}):null,F.detailsHtml?t("div",{className:"mt-3 text-sm leading-relaxed",children:F.detailsHtml}):null]}):t("div",{className:"text-slate-600",children:"Complete los campos y presione Calcular."})}),t("div",{className:"mt-4 flex justify-center",children:t("button","volver"===P?{type:"button",onClick:R,className:"px-4 py-2 rounded-md border",children:"Volver"}:{type:"button",onClick:E,className:"px-4 py-2 rounded-md border",children:"Limpiar"})})]})]})})})})})]})}),L&&e("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4",children:[t("div",{className:"absolute inset-0 bg-black/40",style:{backdropFilter:"blur(10px)"},onClick:()=>V(!1)}),e("div",{className:"relative z-10 w-[90vw] max-w-[600px] max-h-[85vh] overflow-y-auto rounded-2xl bg-white shadow-lg ring-1 ring-slate-200 p-5",children:[t("button",{onClick:()=>V(!1),"aria-label":"Cerrar",className:"absolute top-3 right-3 inline-flex h-10 w-10 items-center justify-center rounded-md hover:bg-slate-100 bg-white/90 shadow-sm",style:{zIndex:10},children:t(c,{className:"w-5 h-5"})}),t("div",{className:"flex items-start justify-between mb-2 pr-10",children:t("h4",{className:"text-lg font-semibold text-slate-900",children:"Fórmulas"})}),t("div",{className:"space-y-3",children:w&&w.length>0?w.map((l,n)=>{var i;const r=function(e){if(e.expressionLatex)return e.expressionLatex;if(e.formulaLatex)return e.formulaLatex;const t=e.expressionText||e.description;return t?function(e){const t=e.replace(/\\/g,"\\\\").replace(/([{}_#%&$])/g,"\\$1").replace(/\n/g," ");return String.raw`\text{${t}}`}(t):null}(l),o=!!l.scoring&&(null==(i=l.scoring.rows)?void 0:i.length);return e("div",{"data-testid":`formula-item-${n+1}`,className:"rounded-xl bg-slate-50 p-3",children:[e("div",{className:"text-sm font-semibold text-slate-800",children:[n+1,". ",l.label]}),r?t("div",{className:"mt-1 overflow-x-auto","data-testid":"formula-latex",children:t(a.Suspense,{fallback:t("div",{className:"text-sm text-slate-500",children:"Cargando fórmulas…"}),children:t(u,{expression:r,display:!0,className:"block text-sky-700 dark:text-sky-300 text-base"})})}):null,o?e("div",{className:"mt-2 space-y-2",children:[!r&&t("div",{"data-testid":"formula-latex",className:"overflow-x-auto",children:t(a.Suspense,{fallback:t("div",{className:"text-sm text-slate-500",children:"Cargando fórmulas…"}),children:t(u,{expression:String.raw`\\mathrm{Puntuaci\\'on}=\\sum_{i=1}^{n}\\text{Puntos}(i)`,display:!0,className:"block text-sky-700 dark:text-sky-300 text-base"})})}),t("div",{className:"space-y-2",children:l.scoring.rows.map((l,a)=>e("div",{className:"rounded-lg bg-white border border-slate-200 p-2",children:[t("div",{className:"text-xs font-semibold text-slate-700",children:l.label}),t("ul",{className:"mt-1 space-y-1",children:l.options.map((l,a)=>e("li",{className:"text-xs text-slate-600 flex items-start gap-2",children:[e("span",{className:"inline-block min-w-12 rounded border border-slate-200 px-1 py-0.5 text-[11px] text-slate-700",children:[l.points," pt"]}),t("span",{className:"flex-1",children:l.label})]},a))})]},a))})]}):r?null:t("div",{className:"mt-1 text-xs italic text-slate-500",children:"Fórmula o sistema de puntuación no disponible"})]},l.id)}):t("div",{className:"text-sm text-slate-600",children:"No hay fórmulas disponibles."})})]})]})]})})]})})},b=a.memo(({field:l,modalId:a,value:n,onValueChange:i,isTestEnv:r,autoCalculate:o,setInputTick:s,firstRef:c,error:d,recordCaret:u,captureBodyScrollTop:m})=>{var f;const p=`${a}-${l.name}`,b=l.label;return"number"===l.type?e("div",{className:"flex flex-col gap-1",children:[t("label",{htmlFor:p,className:"text-sm font-medium",children:b}),e("div",{className:"flex items-center gap-2",children:[t("input",{id:p,name:l.name,type:"text",inputMode:"decimal",lang:"es-ES",className:"w-full rounded-md border px-3 py-2",placeholder:l.placeholder||"p. ej., 0","aria-label":b,onWheel:e=>{e.stopPropagation()},value:"number"==typeof n||"string"==typeof n?n:"",onChange:e=>{m();const t=e.target.value;u(p,"number"==typeof e.target.selectionStart?e.target.selectionStart:null),i(l.name,t),r&&o&&s(e=>e+1)},"aria-invalid":!(!d||void 0!==n&&""!==n||!(null==(f=l.validation)?void 0:f.required))||void 0,ref:c}),l.unit?t("span",{className:"text-sm text-slate-500",children:l.unit}):null]})]}):"text"===l.type?e("div",{className:"flex flex-col gap-1",children:[t("label",{htmlFor:p,className:"text-sm font-medium",children:b}),t("input",{id:p,name:l.name,type:"text",className:"w-full rounded-md border px-3 py-2",placeholder:l.placeholder,"aria-label":b,value:"string"==typeof n?n:"",onChange:e=>{m(),r&&s(e=>e+1),u(p,"number"==typeof e.target.selectionStart?e.target.selectionStart:null),i(l.name,e.target.value)},ref:c})]}):"select"===l.type?e("div",{className:"flex flex-col gap-1",children:[t("label",{htmlFor:p,className:"text-sm font-medium",children:b}),e("select",{id:p,name:l.name,className:"w-full rounded-md border px-3 py-2","aria-label":b,value:"string"==typeof n?n:"",onChange:e=>{m(),r&&s(e=>e+1),i(l.name,e.target.value)},ref:c,children:[t("option",{value:"",disabled:!0,children:l.placeholder||"Seleccione..."}),(l.options||[]).map(e=>t("option",{value:e.value,children:e.label},e.value))]})]}):"toggle"===l.type?e("div",{className:"flex flex-col gap-1",children:[t("label",{className:"text-sm font-medium",children:b}),e("div",{className:"flex items-center gap-2 mt-1",children:[t("input",{id:p,name:l.name,type:"checkbox",checked:!!n,onChange:e=>{m(),i(l.name,e.target.checked)}}),t("label",{htmlFor:p,className:"text-sm",children:l.placeholder||l.label})]})]}):null});b.displayName="FieldRow";export{f as C};
